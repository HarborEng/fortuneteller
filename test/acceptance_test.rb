require 'test_helper'

class AcceptanceTest < Minitest::Test

  def test_expected_results
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      r = FortuneTeller::Benchmark.run.as_json
    end

    result.zip(expected_no_reallocation) do |actual, expected|
      assert_equal actual, expected
    end
  end

  def test_expected_cashflow
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      r = FortuneTeller::Benchmark.run.as_json
    end

    result, expected = [result, expected_no_reallocation].map do |transform|
      transform.map do |r| 
        {date: r["date"], cashflow: r["cashflow"]}
      end
    end

    result.zip(expected) do |a, e|
      assert_equal a, e
    end
  end

  def test_expected_results_guaranteed_income
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim_guaranteed_income
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result.zip(expected_guaranteed_income) do |actual, expected|
      assert_equal actual, expected
    end
  end

  def test_expected_results_5050
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim
      sim.set_allocation_strategy(:annual, {stocks: [5000], bonds: [5000]})
      # sim.set_withdrawal_strategy(:tax_sequence)
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result.zip(expected_5050_reallocation) do |actual, expected|
      assert_equal actual, expected
    end
  end

  def test_expected_cashflow_5050
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim
      sim.set_allocation_strategy(:annual, {stocks: [5000], bonds: [5000]})
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result, expected = [result, expected_5050_reallocation].map do |transform|
      transform.map do |r| 
        {date: r["date"], cashflow: r["cashflow"]}
      end
    end

    result.zip(expected) do |a, e|
      assert_equal a, e
    end
  end

  def test_state_independence
    # create two sims, run one first through a set of crazy params, and
    # then both through the same params. the results should match up.
    sim1 = FortuneTeller::Benchmark.create_sim
    sim2 = FortuneTeller::Benchmark.create_sim

    sim1.simulate(growth_rates:
      {
        stocks:       [1.15],
        bonds:        [1.45],
        wage_growth:  [1.30],
        inflation:    [1.12]
      }
    )

    res1 = sim1.simulate(
      growth_rates: {
        stocks:       [1.05],
        bonds:        [1.05],
        wage_growth:  [1.00],
        inflation:    [1.02]
      }
    ).as_json

    res2 = sim2.simulate(
      growth_rates: {
        stocks:       [1.05],
        bonds:        [1.05],
        wage_growth:  [1.00],
        inflation:    [1.02]
      }
    ).as_json

    res1.as_json.zip(res2).each do |line1, line2|
      assert_equal line1, line2
    end
  end

  def expected_guaranteed_income
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}}, 
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50125051, "type"=>"_401k", "balances"=>{"stocks"=>30086330, "bonds"=>20038721}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20057553, "type"=>"_401k", "balances"=>{"stocks"=>20057553}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53764116, "type"=>"_401k", "balances"=>{"stocks"=>32923847, "bonds"=>20840269}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>22035261, "type"=>"_401k", "balances"=>{"stocks"=>22035261}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57605493, "type"=>"_401k", "balances"=>{"stocks"=>35931615, "bonds"=>21673878}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>24131633, "type"=>"_401k", "balances"=>{"stocks"=>24131633}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61669213, "type"=>"_401k", "balances"=>{"stocks"=>39125958, "bonds"=>22543255}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>26357891, "type"=>"_401k", "balances"=>{"stocks"=>26357891}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65950837, "type"=>"_401k", "balances"=>{"stocks"=>42505851, "bonds"=>23444986}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>28713621, "type"=>"_401k", "balances"=>{"stocks"=>28713621}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>70471326, "type"=>"_401k", "balances"=>{"stocks"=>46088541, "bonds"=>24382785}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>31210694, "type"=>"_401k", "balances"=>{"stocks"=>31210694}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>75244286, "type"=>"_401k", "balances"=>{"stocks"=>49886191, "bonds"=>25358095}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>33857592, "type"=>"_401k", "balances"=>{"stocks"=>33857592}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>80295425, "type"=>"_401k", "balances"=>{"stocks"=>53920171, "bonds"=>26375254}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>36669054, "type"=>"_401k", "balances"=>{"stocks"=>36669054}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>85617984, "type"=>"_401k", "balances"=>{"stocks"=>58187720, "bonds"=>27430264}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>39643454, "type"=>"_401k", "balances"=>{"stocks"=>39643454}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>91238794, "type"=>"_401k", "balances"=>{"stocks"=>62711320, "bonds"=>28527474}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>42796318, "type"=>"_401k", "balances"=>{"stocks"=>42796318}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>97174911, "type"=>"_401k", "balances"=>{"stocks"=>67506337, "bonds"=>29668574}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>46138353, "type"=>"_401k", "balances"=>{"stocks"=>46138353}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>103459138, "type"=>"_401k", "balances"=>{"stocks"=>72600506, "bonds"=>30858632}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>49688739, "type"=>"_401k", "balances"=>{"stocks"=>49688739}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>110081852, "type"=>"_401k", "balances"=>{"stocks"=>77988874, "bonds"=>32092978}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>53444320, "type"=>"_401k", "balances"=>{"stocks"=>53444320}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>117077240, "type"=>"_401k", "balances"=>{"stocks"=>83700544, "bonds"=>33376696}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>57425236, "type"=>"_401k", "balances"=>{"stocks"=>57425236}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}}, 
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>122247178, "type"=>"_401k", "balances"=>{"stocks"=>87918275, "bonds"=>34328903}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>60968607, "type"=>"_401k", "balances"=>{"stocks"=>60968607}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756, "gty_income"=>550000}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>385000, "ss_income"=>4851756, "qualified_withdrawal"=>2146988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}}, 
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>127443107, "type"=>"_401k", "balances"=>{"stocks"=>92144650, "bonds"=>35298457}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>64669250, "type"=>"_401k", "balances"=>{"stocks"=>64669250}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788, "gty_income"=>611000}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>427700, "ss_income"=>5748788, "qualified_withdrawal"=>4707584, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}}, 
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>131190814, "type"=>"_401k", "balances"=>{"stocks"=>95352645, "bonds"=>35838169}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>67177924, "type"=>"_401k", "balances"=>{"stocks"=>67177924}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764, "gty_income"=>623220}, "posttax"=>{"w2_income"=>0, "gty_income"=>436254, "ss_income"=>6271764, "qualified_withdrawal"=>6053778, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}}, 
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>134227289, "type"=>"_401k", "balances"=>{"stocks"=>98065080, "bonds"=>36162209}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>69088892, "type"=>"_401k", "balances"=>{"stocks"=>69088892}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200, "gty_income"=>635680}, "posttax"=>{"w2_income"=>0, "gty_income"=>444976, "ss_income"=>6397200, "qualified_withdrawal"=>6174860, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}}, 
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>137364261, "type"=>"_401k", "balances"=>{"stocks"=>100869661, "bonds"=>36494600}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>71064780, "type"=>"_401k", "balances"=>{"stocks"=>71064780}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144, "gty_income"=>648402}, "posttax"=>{"w2_income"=>0, "gty_income"=>453881, "ss_income"=>6525144, "qualified_withdrawal"=>6298355, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277380}}}, 
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>140627211, "type"=>"_401k", "balances"=>{"stocks"=>103787395, "bonds"=>36839816}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>73120385, "type"=>"_401k", "balances"=>{"stocks"=>73120385}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644, "gty_income"=>661366}, "posttax"=>{"w2_income"=>0, "gty_income"=>462956, "ss_income"=>6655644, "qualified_withdrawal"=>6424322, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542922}}}, 
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>143979856, "type"=>"_401k", "balances"=>{"stocks"=>106789591, "bonds"=>37190265}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>75235498, "type"=>"_401k", "balances"=>{"stocks"=>75235498}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760, "gty_income"=>674592}, "posttax"=>{"w2_income"=>0, "gty_income"=>472214, "ss_income"=>6788760, "qualified_withdrawal"=>6552809, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813783}}}, 
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>147447008, "type"=>"_401k", "balances"=>{"stocks"=>109896767, "bonds"=>37550241}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>77424566, "type"=>"_401k", "balances"=>{"stocks"=>77424566}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528, "gty_income"=>688082}, "posttax"=>{"w2_income"=>0, "gty_income"=>481657, "ss_income"=>6924528, "qualified_withdrawal"=>6683876, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090061}}}, 
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>151033793, "type"=>"_401k", "balances"=>{"stocks"=>113113630, "bonds"=>37920163}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>79690912, "type"=>"_401k", "balances"=>{"stocks"=>79690912}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032, "gty_income"=>701847}, "posttax"=>{"w2_income"=>0, "gty_income"=>491293, "ss_income"=>7063032, "qualified_withdrawal"=>6817536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371861}}}, 
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>154768927, "type"=>"_401k", "balances"=>{"stocks"=>116464190, "bonds"=>38304737}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>82051450, "type"=>"_401k", "balances"=>{"stocks"=>82051450}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284, "gty_income"=>715888}, "posttax"=>{"w2_income"=>0, "gty_income"=>501122, "ss_income"=>7204284, "qualified_withdrawal"=>6953885, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659291}}}, 
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>158612854, "type"=>"_401k", "balances"=>{"stocks"=>119916739, "bonds"=>38696115}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>84483843, "type"=>"_401k", "balances"=>{"stocks"=>84483843}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368, "gty_income"=>730205}, "posttax"=>{"w2_income"=>0, "gty_income"=>511143, "ss_income"=>7348368, "qualified_withdrawal"=>7092969, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}}, 
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>162593588, "type"=>"_401k", "balances"=>{"stocks"=>123494770, "bonds"=>39098818}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>87004645, "type"=>"_401k", "balances"=>{"stocks"=>87004645}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332, "gty_income"=>744809}, "posttax"=>{"w2_income"=>0, "gty_income"=>521366, "ss_income"=>7495332, "qualified_withdrawal"=>7234837, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251535}}}, 
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>166717444, "type"=>"_401k", "balances"=>{"stocks"=>127204109, "bonds"=>39513335}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>89617950, "type"=>"_401k", "balances"=>{"stocks"=>89617950}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236, "gty_income"=>759701}, "posttax"=>{"w2_income"=>0, "gty_income"=>531791, "ss_income"=>7645236, "qualified_withdrawal"=>7379538, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556565}}}, 
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>171016907, "type"=>"_401k", "balances"=>{"stocks"=>131072290, "bonds"=>39944617}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>92343165, "type"=>"_401k", "balances"=>{"stocks"=>92343165}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152, "gty_income"=>774892}, "posttax"=>{"w2_income"=>0, "gty_income"=>542424, "ss_income"=>7798152, "qualified_withdrawal"=>7527120, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}}, 
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>175448799, "type"=>"_401k", "balances"=>{"stocks"=>135064248, "bonds"=>40384551}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>95155581, "type"=>"_401k", "balances"=>{"stocks"=>95155581}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116, "gty_income"=>790394}, "posttax"=>{"w2_income"=>0, "gty_income"=>553276, "ss_income"=>7954116, "qualified_withdrawal"=>7677654, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185046}}}, 
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>180044937, "type"=>"_401k", "balances"=>{"stocks"=>139207028, "bonds"=>40837909}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>98074254, "type"=>"_401k", "balances"=>{"stocks"=>98074254}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200, "gty_income"=>806197}, "posttax"=>{"w2_income"=>0, "gty_income"=>564338, "ss_income"=>8113200, "qualified_withdrawal"=>7831211, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508749}}}, 
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>184813088, "type"=>"_401k", "balances"=>{"stocks"=>143507824, "bonds"=>41305264}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>101104252, "type"=>"_401k", "balances"=>{"stocks"=>101104252}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464, "gty_income"=>822322}, "posttax"=>{"w2_income"=>0, "gty_income"=>575625, "ss_income"=>8275464, "qualified_withdrawal"=>7987842, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838931}}}, 
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>189790233, "type"=>"_401k", "balances"=>{"stocks"=>147998382, "bonds"=>41791851}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>104267944, "type"=>"_401k", "balances"=>{"stocks"=>104267944}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968, "gty_income"=>838771}, "posttax"=>{"w2_income"=>0, "gty_income"=>587140, "ss_income"=>8440968, "qualified_withdrawal"=>8147605, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175713}}}, 
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>194929095, "type"=>"_401k", "balances"=>{"stocks"=>152639842, "bonds"=>42289253}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>107537949, "type"=>"_401k", "balances"=>{"stocks"=>107537949}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784, "gty_income"=>855544}, "posttax"=>{"w2_income"=>0, "gty_income"=>598881, "ss_income"=>8609784, "qualified_withdrawal"=>8310560, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519225}}}, 
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>200266013, "type"=>"_401k", "balances"=>{"stocks"=>157463483, "bonds"=>42802530}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>110936302, "type"=>"_401k", "balances"=>{"stocks"=>110936302}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984, "gty_income"=>872663}, "posttax"=>{"w2_income"=>0, "gty_income"=>610864, "ss_income"=>8781984, "qualified_withdrawal"=>8476745, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869593}}}, 
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>205810608, "type"=>"_401k", "balances"=>{"stocks"=>162478252, "bonds"=>43332356}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>114469312, "type"=>"_401k", "balances"=>{"stocks"=>114469312}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616, "gty_income"=>890108}, "posttax"=>{"w2_income"=>0, "gty_income"=>623076, "ss_income"=>8957616, "qualified_withdrawal"=>8646299, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226991}}}, 
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>211605191, "type"=>"_401k", "balances"=>{"stocks"=>167720903, "bonds"=>43884288}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>118162872, "type"=>"_401k", "balances"=>{"stocks"=>118162872}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776, "gty_income"=>907910}, "posttax"=>{"w2_income"=>0, "gty_income"=>635537, "ss_income"=>9136776, "qualified_withdrawal"=>8819216, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591529}}}, 
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>217597905, "type"=>"_401k", "balances"=>{"stocks"=>173148328, "bonds"=>44449577}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>121986606, "type"=>"_401k", "balances"=>{"stocks"=>121986606}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512, "gty_income"=>926072}, "posttax"=>{"w2_income"=>0, "gty_income"=>648250, "ss_income"=>9319512, "qualified_withdrawal"=>8995601, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963363}}}, 
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>223830469, "type"=>"_401k", "balances"=>{"stocks"=>178796865, "bonds"=>45033604}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>125966120, "type"=>"_401k", "balances"=>{"stocks"=>125966120}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896, "gty_income"=>944594}, "posttax"=>{"w2_income"=>0, "gty_income"=>661216, "ss_income"=>9505896, "qualified_withdrawal"=>9175515, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342627}}}, 
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>230314780, "type"=>"_401k", "balances"=>{"stocks"=>184677624, "bonds"=>45637156}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>130109239, "type"=>"_401k", "balances"=>{"stocks"=>130109239}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024, "gty_income"=>963487}, "posttax"=>{"w2_income"=>0, "gty_income"=>674441, "ss_income"=>9696024, "qualified_withdrawal"=>9359027, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729492}}}, 
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>237099604, "type"=>"_401k", "balances"=>{"stocks"=>190833432, "bonds"=>46266172}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>134446133, "type"=>"_401k", "balances"=>{"stocks"=>134446133}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944, "gty_income"=>982752}, "posttax"=>{"w2_income"=>0, "gty_income"=>687926, "ss_income"=>9889944, "qualified_withdrawal"=>9546202, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}}, 
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>244127847, "type"=>"_401k", "balances"=>{"stocks"=>197216332, "bonds"=>46911515}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>138943019, "type"=>"_401k", "balances"=>{"stocks"=>138943019}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740, "gty_income"=>1002411}, "posttax"=>{"w2_income"=>0, "gty_income"=>701688, "ss_income"=>10087740, "qualified_withdrawal"=>9737121, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526549}}}, 
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>251447731, "type"=>"_401k", "balances"=>{"stocks"=>203868788, "bonds"=>47578943}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>143629811, "type"=>"_401k", "balances"=>{"stocks"=>143629811}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496, "gty_income"=>1022455}, "posttax"=>{"w2_income"=>0, "gty_income"=>715719, "ss_income"=>10289496, "qualified_withdrawal"=>9931867, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937082}}}, 
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>259074008, "type"=>"_401k", "balances"=>{"stocks"=>210804632, "bonds"=>48269376}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>148516257, "type"=>"_401k", "balances"=>{"stocks"=>148516257}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284, "gty_income"=>1042905}, "posttax"=>{"w2_income"=>0, "gty_income"=>730034, "ss_income"=>10495284, "qualified_withdrawal"=>10130503, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355821}}}, 
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>267063176, "type"=>"_401k", "balances"=>{"stocks"=>218073989, "bonds"=>48989187}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>153637672, "type"=>"_401k", "balances"=>{"stocks"=>153637672}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188, "gty_income"=>1063763}, "posttax"=>{"w2_income"=>0, "gty_income"=>744634, "ss_income"=>10705188, "qualified_withdrawal"=>10333122, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782944}}}, 
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>275352210, "type"=>"_401k", "balances"=>{"stocks"=>225623407, "bonds"=>49728803}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>158956397, "type"=>"_401k", "balances"=>{"stocks"=>158956397}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280, "gty_income"=>1085040}, "posttax"=>{"w2_income"=>0, "gty_income"=>759528, "ss_income"=>10919280, "qualified_withdrawal"=>10539788, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218596}}}, 
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>283997167, "type"=>"_401k", "balances"=>{"stocks"=>233502754, "bonds"=>50494413}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>164507560, "type"=>"_401k", "balances"=>{"stocks"=>164507560}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680, "gty_income"=>1106737}, "posttax"=>{"w2_income"=>0, "gty_income"=>774716, "ss_income"=>11137680, "qualified_withdrawal"=>10750579, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662975}}}, 
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>293016394, "type"=>"_401k", "balances"=>{"stocks"=>241729302, "bonds"=>51287092}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>170303333, "type"=>"_401k", "balances"=>{"stocks"=>170303333}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436, "gty_income"=>1128876}, "posttax"=>{"w2_income"=>0, "gty_income"=>790213, "ss_income"=>11360436, "qualified_withdrawal"=>10965586, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116235}}}, 
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>302475746, "type"=>"_401k", "balances"=>{"stocks"=>250362029, "bonds"=>52113717}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>176385271, "type"=>"_401k", "balances"=>{"stocks"=>176385271}}}, "cashflow"=>nil}
    ]
  end

  def expected_no_reallocation
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}}, 
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50125051, "type"=>"_401k", "balances"=>{"stocks"=>30086330, "bonds"=>20038721}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20057553, "type"=>"_401k", "balances"=>{"stocks"=>20057553}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53764116, "type"=>"_401k", "balances"=>{"stocks"=>32923847, "bonds"=>20840269}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>22035261, "type"=>"_401k", "balances"=>{"stocks"=>22035261}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57605493, "type"=>"_401k", "balances"=>{"stocks"=>35931615, "bonds"=>21673878}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>24131633, "type"=>"_401k", "balances"=>{"stocks"=>24131633}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61669213, "type"=>"_401k", "balances"=>{"stocks"=>39125958, "bonds"=>22543255}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>26357891, "type"=>"_401k", "balances"=>{"stocks"=>26357891}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65950837, "type"=>"_401k", "balances"=>{"stocks"=>42505851, "bonds"=>23444986}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>28713621, "type"=>"_401k", "balances"=>{"stocks"=>28713621}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>70471326, "type"=>"_401k", "balances"=>{"stocks"=>46088541, "bonds"=>24382785}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>31210694, "type"=>"_401k", "balances"=>{"stocks"=>31210694}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>75244286, "type"=>"_401k", "balances"=>{"stocks"=>49886191, "bonds"=>25358095}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>33857592, "type"=>"_401k", "balances"=>{"stocks"=>33857592}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>80295425, "type"=>"_401k", "balances"=>{"stocks"=>53920171, "bonds"=>26375254}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>36669054, "type"=>"_401k", "balances"=>{"stocks"=>36669054}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>85617984, "type"=>"_401k", "balances"=>{"stocks"=>58187720, "bonds"=>27430264}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>39643454, "type"=>"_401k", "balances"=>{"stocks"=>39643454}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>91238794, "type"=>"_401k", "balances"=>{"stocks"=>62711320, "bonds"=>28527474}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>42796318, "type"=>"_401k", "balances"=>{"stocks"=>42796318}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>97174911, "type"=>"_401k", "balances"=>{"stocks"=>67506337, "bonds"=>29668574}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>46138353, "type"=>"_401k", "balances"=>{"stocks"=>46138353}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>103459138, "type"=>"_401k", "balances"=>{"stocks"=>72600506, "bonds"=>30858632}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>49688739, "type"=>"_401k", "balances"=>{"stocks"=>49688739}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>110081852, "type"=>"_401k", "balances"=>{"stocks"=>77988874, "bonds"=>32092978}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>53444320, "type"=>"_401k", "balances"=>{"stocks"=>53444320}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>117077240, "type"=>"_401k", "balances"=>{"stocks"=>83700544, "bonds"=>33376696}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>57425236, "type"=>"_401k", "balances"=>{"stocks"=>57425236}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}}, 
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>122247178, "type"=>"_401k", "balances"=>{"stocks"=>87918275, "bonds"=>34328903}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>60968607, "type"=>"_401k", "balances"=>{"stocks"=>60968607}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>0, "ss_income"=>4851756, "qualified_withdrawal"=>2531988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}}, 
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>127180084, "type"=>"_401k", "balances"=>{"stocks"=>91954481, "bonds"=>35225603}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>64536488, "type"=>"_401k", "balances"=>{"stocks"=>64536488}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>0, "ss_income"=>5748788, "qualified_withdrawal"=>5135284, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}}, 
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>130621998, "type"=>"_401k", "balances"=>{"stocks"=>94939219, "bonds"=>35682779}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>66887987, "type"=>"_401k", "balances"=>{"stocks"=>66887987}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6271764, "qualified_withdrawal"=>6490032, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}}, 
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>133330724, "type"=>"_401k", "balances"=>{"stocks"=>97410063, "bonds"=>35920661}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>68628784, "type"=>"_401k", "balances"=>{"stocks"=>68628784}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6397200, "qualified_withdrawal"=>6619836, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}}, 
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>136116594, "type"=>"_401k", "balances"=>{"stocks"=>99953473, "bonds"=>36163121}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>70420704, "type"=>"_401k", "balances"=>{"stocks"=>70420704}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6525144, "qualified_withdrawal"=>6752232, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277376}}}, 
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>139003445, "type"=>"_401k", "balances"=>{"stocks"=>102589006, "bonds"=>36414439}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>72277525, "type"=>"_401k", "balances"=>{"stocks"=>72277525}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6655644, "qualified_withdrawal"=>6887280, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542924}}}, 
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>141953872, "type"=>"_401k", "balances"=>{"stocks"=>105286928, "bonds"=>36666944}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>74178306, "type"=>"_401k", "balances"=>{"stocks"=>74178306}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6788760, "qualified_withdrawal"=>7025028, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813788}}}, 
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>144990889, "type"=>"_401k", "balances"=>{"stocks"=>108066152, "bonds"=>36924737}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>76136367, "type"=>"_401k", "balances"=>{"stocks"=>76136367}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6924528, "qualified_withdrawal"=>7165536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090064}}}, 
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>148117932, "type"=>"_401k", "balances"=>{"stocks"=>110929862, "bonds"=>37188070}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>78153948, "type"=>"_401k", "balances"=>{"stocks"=>78153948}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7063032, "qualified_withdrawal"=>7308828, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371860}}}, 
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>151361446, "type"=>"_401k", "balances"=>{"stocks"=>113900055, "bonds"=>37461391}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>80246554, "type"=>"_401k", "balances"=>{"stocks"=>80246554}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7204284, "qualified_withdrawal"=>7455012, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659296}}}, 
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>154680859, "type"=>"_401k", "balances"=>{"stocks"=>116944024, "bonds"=>37736835}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>82391136, "type"=>"_401k", "balances"=>{"stocks"=>82391136}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7348368, "qualified_withdrawal"=>7604112, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}}, 
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>158101738, "type"=>"_401k", "balances"=>{"stocks"=>120083083, "bonds"=>38018655}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>84602713, "type"=>"_401k", "balances"=>{"stocks"=>84602713}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7495332, "qualified_withdrawal"=>7756200, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251532}}}, 
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>161628247, "type"=>"_401k", "balances"=>{"stocks"=>123321104, "bonds"=>38307143}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>86884011, "type"=>"_401k", "balances"=>{"stocks"=>86884011}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7645236, "qualified_withdrawal"=>7911324, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556560}}}, 
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>165289812, "type"=>"_401k", "balances"=>{"stocks"=>126682893, "bonds"=>38606919}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>89252505, "type"=>"_401k", "balances"=>{"stocks"=>89252505}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7798152, "qualified_withdrawal"=>8069544, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}}, 
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>169042396, "type"=>"_401k", "balances"=>{"stocks"=>130132476, "bonds"=>38909920}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>91682853, "type"=>"_401k", "balances"=>{"stocks"=>91682853}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7954116, "qualified_withdrawal"=>8230932, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185048}}}, 
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>172914503, "type"=>"_401k", "balances"=>{"stocks"=>133693941, "bonds"=>39220562}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>94192033, "type"=>"_401k", "balances"=>{"stocks"=>94192033}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8113200, "qualified_withdrawal"=>8395548, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508748}}}, 
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>176911226, "type"=>"_401k", "balances"=>{"stocks"=>137372026, "bonds"=>39539200}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>96783371, "type"=>"_401k", "balances"=>{"stocks"=>96783371}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8275464, "qualified_withdrawal"=>8563464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838928}}}, 
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>181065434, "type"=>"_401k", "balances"=>{"stocks"=>141194804, "bonds"=>39870630}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>99476647, "type"=>"_401k", "balances"=>{"stocks"=>99476647}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8440968, "qualified_withdrawal"=>8734740, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175708}}}, 
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>185329241, "type"=>"_401k", "balances"=>{"stocks"=>145122663, "bonds"=>40206578}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>102243960, "type"=>"_401k", "balances"=>{"stocks"=>102243960}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8609784, "qualified_withdrawal"=>8909436, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519220}}}, 
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>189734596, "type"=>"_401k", "balances"=>{"stocks"=>149182944, "bonds"=>40551652}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>105104573, "type"=>"_401k", "balances"=>{"stocks"=>105104573}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8781984, "qualified_withdrawal"=>9087612, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869596}}}, 
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>194287718, "type"=>"_401k", "balances"=>{"stocks"=>153381465, "bonds"=>40906253}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>108062577, "type"=>"_401k", "balances"=>{"stocks"=>108062577}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8957616, "qualified_withdrawal"=>9269376, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226992}}}, 
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>199025527, "type"=>"_401k", "balances"=>{"stocks"=>157750121, "bonds"=>41275406}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>111140445, "type"=>"_401k", "balances"=>{"stocks"=>111140445}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9136776, "qualified_withdrawal"=>9454752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591528}}}, 
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>203895871, "type"=>"_401k", "balances"=>{"stocks"=>162245280, "bonds"=>41650591}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>114307439, "type"=>"_401k", "balances"=>{"stocks"=>114307439}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9319512, "qualified_withdrawal"=>9643848, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963360}}}, 
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>208934719, "type"=>"_401k", "balances"=>{"stocks"=>166898083, "bonds"=>42036636}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>117585501, "type"=>"_401k", "balances"=>{"stocks"=>117585501}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9505896, "qualified_withdrawal"=>9836736, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342632}}}, 
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>214149677, "type"=>"_401k", "balances"=>{"stocks"=>171715672, "bonds"=>42434005}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>120979661, "type"=>"_401k", "balances"=>{"stocks"=>120979661}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9696024, "qualified_withdrawal"=>10033464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729488}}}, 
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>219582434, "type"=>"_401k", "balances"=>{"stocks"=>176734472, "bonds"=>42847962}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>124515580, "type"=>"_401k", "balances"=>{"stocks"=>124515580}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9889944, "qualified_withdrawal"=>10234128, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}}, 
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>225176071, "type"=>"_401k", "balances"=>{"stocks"=>181906338, "bonds"=>43269733}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>128159341, "type"=>"_401k", "balances"=>{"stocks"=>128159341}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10087740, "qualified_withdrawal"=>10438812, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526552}}}, 
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>230971301, "type"=>"_401k", "balances"=>{"stocks"=>187266924, "bonds"=>43704377}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>131936060, "type"=>"_401k", "balances"=>{"stocks"=>131936060}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10289496, "qualified_withdrawal"=>10647588, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937084}}}, 
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>236977492, "type"=>"_401k", "balances"=>{"stocks"=>192825046, "bonds"=>44152446}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>135851951, "type"=>"_401k", "balances"=>{"stocks"=>135851951}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10495284, "qualified_withdrawal"=>10860540, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355824}}}, 
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>243241928, "type"=>"_401k", "balances"=>{"stocks"=>198622450, "bonds"=>44619478}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>139936428, "type"=>"_401k", "balances"=>{"stocks"=>139936428}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10705188, "qualified_withdrawal"=>11077752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782940}}}, 
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>249702377, "type"=>"_401k", "balances"=>{"stocks"=>204605969, "bonds"=>45096408}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>144152027, "type"=>"_401k", "balances"=>{"stocks"=>144152027}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10919280, "qualified_withdrawal"=>11299320, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218600}}}, 
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>256405155, "type"=>"_401k", "balances"=>{"stocks"=>210816594, "bonds"=>45588561}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>148527627, "type"=>"_401k", "balances"=>{"stocks"=>148527627}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11137680, "qualified_withdrawal"=>11525292, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662972}}}, 
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>263361851, "type"=>"_401k", "balances"=>{"stocks"=>217265254, "bonds"=>46096597}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>153070932, "type"=>"_401k", "balances"=>{"stocks"=>153070932}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11360436, "qualified_withdrawal"=>11755800, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116236}}}, 
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>270626387, "type"=>"_401k", "balances"=>{"stocks"=>224000032, "bonds"=>46626355}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>157815816, "type"=>"_401k", "balances"=>{"stocks"=>157815816}}}, "cashflow"=>nil}
    ]
  end

  def expected_5050_reallocation
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}}, 
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50120343, "type"=>"_401k", "balances"=>{"stocks"=>25071942, "bonds"=>25048401}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20048137, "type"=>"_401k", "balances"=>{"stocks"=>10028777, "bonds"=>10019360}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53658697, "type"=>"_401k", "balances"=>{"stocks"=>27596119, "bonds"=>26062578}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>21824801, "type"=>"_401k", "balances"=>{"stocks"=>11399770, "bonds"=>10425031}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57373970, "type"=>"_401k", "balances"=>{"stocks"=>29471446, "bonds"=>27902524}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>23690299, "type"=>"_401k", "balances"=>{"stocks"=>12341401, "bonds"=>11348898}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61283093, "type"=>"_401k", "balances"=>{"stocks"=>31445423, "bonds"=>29837670}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>25652420, "type"=>"_401k", "balances"=>{"stocks"=>13332140, "bonds"=>12320280}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65379584, "type"=>"_401k", "balances"=>{"stocks"=>33512378, "bonds"=>31867206}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>27709296, "type"=>"_401k", "balances"=>{"stocks"=>14370039, "bonds"=>13339257}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>69680900, "type"=>"_401k", "balances"=>{"stocks"=>35683517, "bonds"=>33997383}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>29869018, "type"=>"_401k", "balances"=>{"stocks"=>15460182, "bonds"=>14408836}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>74197283, "type"=>"_401k", "balances"=>{"stocks"=>37963214, "bonds"=>36234069}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>32136725, "type"=>"_401k", "balances"=>{"stocks"=>16604835, "bonds"=>15531890}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>78949937, "type"=>"_401k", "balances"=>{"stocks"=>40363205, "bonds"=>38586732}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>34522354, "type"=>"_401k", "balances"=>{"stocks"=>17809462, "bonds"=>16712892}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>83929771, "type"=>"_401k", "balances"=>{"stocks"=>42875803, "bonds"=>41053968}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>37022729, "type"=>"_401k", "balances"=>{"stocks"=>19071104, "bonds"=>17951625}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>89158599, "type"=>"_401k", "balances"=>{"stocks"=>45515117, "bonds"=>43643482}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>39648124, "type"=>"_401k", "balances"=>{"stocks"=>20396303, "bonds"=>19251821}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>94648869, "type"=>"_401k", "balances"=>{"stocks"=>48286396, "bonds"=>46362473}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>42404788, "type"=>"_401k", "balances"=>{"stocks"=>21787762, "bonds"=>20617026}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>100426977, "type"=>"_401k", "balances"=>{"stocks"=>51204275, "bonds"=>49222702}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>45305261, "type"=>"_401k", "balances"=>{"stocks"=>23252403, "bonds"=>22052858}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>106480662, "type"=>"_401k", "balances"=>{"stocks"=>54258634, "bonds"=>52222028}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>48344780, "type"=>"_401k", "balances"=>{"stocks"=>24786045, "bonds"=>23558735}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}}, 
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>112837032, "type"=>"_401k", "balances"=>{"stocks"=>57467087, "bonds"=>55369945}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>51536274, "type"=>"_401k", "balances"=>{"stocks"=>26396989, "bonds"=>25139285}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}}, 
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>117261665, "type"=>"_401k", "balances"=>{"stocks"=>59275472, "bonds"=>57986193}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>54246519, "type"=>"_401k", "balances"=>{"stocks"=>27762374, "bonds"=>26484145}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>0, "ss_income"=>4851756, "qualified_withdrawal"=>2531988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}}, 
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>121367230, "type"=>"_401k", "balances"=>{"stocks"=>61263138, "bonds"=>60104092}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>56914307, "type"=>"_401k", "balances"=>{"stocks"=>29109501, "bonds"=>27804806}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>0, "ss_income"=>5748788, "qualified_withdrawal"=>5135284, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}}, 
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>123863952, "type"=>"_401k", "balances"=>{"stocks"=>62521805, "bonds"=>61342147}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>58341339, "type"=>"_401k", "balances"=>{"stocks"=>29575372, "bonds"=>28765967}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6271764, "qualified_withdrawal"=>6490032, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}}, 
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>125526082, "type"=>"_401k", "balances"=>{"stocks"=>63360782, "bonds"=>62165300}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>59124227, "type"=>"_401k", "balances"=>{"stocks"=>29843657, "bonds"=>29280570}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6397200, "qualified_withdrawal"=>6619836, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}}, 
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>127180696, "type"=>"_401k", "balances"=>{"stocks"=>64195970, "bonds"=>62984726}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>59903570, "type"=>"_401k", "balances"=>{"stocks"=>30237041, "bonds"=>29666529}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6525144, "qualified_withdrawal"=>6752232, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277376}}}, 
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>128843374, "type"=>"_401k", "balances"=>{"stocks"=>65036907, "bonds"=>63806467}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>60686702, "type"=>"_401k", "balances"=>{"stocks"=>30633128, "bonds"=>30053574}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6655644, "qualified_withdrawal"=>6887280, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542924}}}, 
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>130477137, "type"=>"_401k", "balances"=>{"stocks"=>65859890, "bonds"=>64617247}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>61456223, "type"=>"_401k", "balances"=>{"stocks"=>31020761, "bonds"=>30435462}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6788760, "qualified_withdrawal"=>7025028, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813788}}}, 
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>132096424, "type"=>"_401k", "balances"=>{"stocks"=>66677243, "bonds"=>65419181}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>62218920, "type"=>"_401k", "balances"=>{"stocks"=>31405740, "bonds"=>30813180}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6924528, "qualified_withdrawal"=>7165536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090064}}}, 
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>133698577, "type"=>"_401k", "balances"=>{"stocks"=>67485947, "bonds"=>66212630}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>62973546, "type"=>"_401k", "balances"=>{"stocks"=>31786647, "bonds"=>31186899}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7063032, "qualified_withdrawal"=>7308828, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371860}}}, 
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>135299459, "type"=>"_401k", "balances"=>{"stocks"=>68295777, "bonds"=>67003682}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>63727582, "type"=>"_401k", "balances"=>{"stocks"=>32168088, "bonds"=>31559494}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7204284, "qualified_withdrawal"=>7455012, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659296}}}, 
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>136859659, "type"=>"_401k", "balances"=>{"stocks"=>69081542, "bonds"=>67778117}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>64462455, "type"=>"_401k", "balances"=>{"stocks"=>32538191, "bonds"=>31924264}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7348368, "qualified_withdrawal"=>7604112, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}}, 
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>138393770, "type"=>"_401k", "balances"=>{"stocks"=>69855903, "bonds"=>68537867}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>65185044, "type"=>"_401k", "balances"=>{"stocks"=>32902926, "bonds"=>32282118}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7495332, "qualified_withdrawal"=>7756200, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251532}}}, 
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>139898400, "type"=>"_401k", "balances"=>{"stocks"=>70615382, "bonds"=>69283018}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>65893751, "type"=>"_401k", "balances"=>{"stocks"=>33260654, "bonds"=>32633097}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7645236, "qualified_withdrawal"=>7911324, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556560}}}, 
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>141389502, "type"=>"_401k", "balances"=>{"stocks"=>71369877, "bonds"=>70019625}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>66596070, "type"=>"_401k", "balances"=>{"stocks"=>33616027, "bonds"=>32980043}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7798152, "qualified_withdrawal"=>8069544, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}}, 
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>142825156, "type"=>"_401k", "balances"=>{"stocks"=>72092699, "bonds"=>70732457}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>67272288, "type"=>"_401k", "balances"=>{"stocks"=>33956489, "bonds"=>33315799}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7954116, "qualified_withdrawal"=>8230932, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185048}}}, 
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>144219929, "type"=>"_401k", "balances"=>{"stocks"=>72796727, "bonds"=>71423202}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>67929236, "type"=>"_401k", "balances"=>{"stocks"=>34288090, "bonds"=>33641146}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8113200, "qualified_withdrawal"=>8395548, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508748}}}, 
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>145569510, "type"=>"_401k", "balances"=>{"stocks"=>73477943, "bonds"=>72091567}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>68564903, "type"=>"_401k", "balances"=>{"stocks"=>34608952, "bonds"=>33955951}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8275464, "qualified_withdrawal"=>8563464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838928}}}, 
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>146889655, "type"=>"_401k", "balances"=>{"stocks"=>74146218, "bonds"=>72743437}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>69186703, "type"=>"_401k", "balances"=>{"stocks"=>34923715, "bonds"=>34262988}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8440968, "qualified_withdrawal"=>8734740, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175708}}}, 
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>148135916, "type"=>"_401k", "balances"=>{"stocks"=>74773365, "bonds"=>73362551}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>69773700, "type"=>"_401k", "balances"=>{"stocks"=>35219106, "bonds"=>34554594}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8609784, "qualified_withdrawal"=>8909436, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519220}}}, 
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>149322521, "type"=>"_401k", "balances"=>{"stocks"=>75372321, "bonds"=>73950200}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>70332607, "type"=>"_401k", "balances"=>{"stocks"=>35501221, "bonds"=>34831386}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8781984, "qualified_withdrawal"=>9087612, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869596}}}, 
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>150444058, "type"=>"_401k", "balances"=>{"stocks"=>75938430, "bonds"=>74505628}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>70860873, "type"=>"_401k", "balances"=>{"stocks"=>35767865, "bonds"=>35093008}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8957616, "qualified_withdrawal"=>9269376, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226992}}}, 
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>151515762, "type"=>"_401k", "balances"=>{"stocks"=>76481362, "bonds"=>75034400}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>71365666, "type"=>"_401k", "balances"=>{"stocks"=>36023601, "bonds"=>35342065}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9136776, "qualified_withdrawal"=>9454752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591528}}}, 
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>152490645, "type"=>"_401k", "balances"=>{"stocks"=>76971470, "bonds"=>75519175}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>71824846, "type"=>"_401k", "balances"=>{"stocks"=>36254446, "bonds"=>35570400}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9319512, "qualified_withdrawal"=>9643848, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963360}}}, 
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>153382259, "type"=>"_401k", "balances"=>{"stocks"=>77421521, "bonds"=>75960738}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>72244798, "type"=>"_401k", "balances"=>{"stocks"=>36466423, "bonds"=>35778375}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9505896, "qualified_withdrawal"=>9836736, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342632}}}, 
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>154183779, "type"=>"_401k", "balances"=>{"stocks"=>77826098, "bonds"=>76357681}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>72622326, "type"=>"_401k", "balances"=>{"stocks"=>36656984, "bonds"=>35965342}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9696024, "qualified_withdrawal"=>10033464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729488}}}, 
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>154909538, "type"=>"_401k", "balances"=>{"stocks"=>78194455, "bonds"=>76715083}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>72964157, "type"=>"_401k", "balances"=>{"stocks"=>36830479, "bonds"=>36133678}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9889944, "qualified_withdrawal"=>10234128, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}}, 
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>155509983, "type"=>"_401k", "balances"=>{"stocks"=>78495515, "bonds"=>77014468}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>73246972, "type"=>"_401k", "balances"=>{"stocks"=>36972282, "bonds"=>36274690}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10087740, "qualified_withdrawal"=>10438812, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526552}}}, 
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>155997544, "type"=>"_401k", "balances"=>{"stocks"=>78741619, "bonds"=>77255925}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>73476625, "type"=>"_401k", "balances"=>{"stocks"=>37088201, "bonds"=>36388424}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10289496, "qualified_withdrawal"=>10647588, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937084}}}, 
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>156363725, "type"=>"_401k", "balances"=>{"stocks"=>78926454, "bonds"=>77437271}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>73649106, "type"=>"_401k", "balances"=>{"stocks"=>37175267, "bonds"=>36473839}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10495284, "qualified_withdrawal"=>10860540, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355824}}}, 
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>156621333, "type"=>"_401k", "balances"=>{"stocks"=>79058526, "bonds"=>77562807}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>73770452, "type"=>"_401k", "balances"=>{"stocks"=>37237476, "bonds"=>36532976}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10705188, "qualified_withdrawal"=>11077752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782940}}}, 
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>156718380, "type"=>"_401k", "balances"=>{"stocks"=>79105470, "bonds"=>77612910}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>73816167, "type"=>"_401k", "balances"=>{"stocks"=>37259589, "bonds"=>36556578}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10919280, "qualified_withdrawal"=>11299320, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218600}}}, 
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>156665588, "type"=>"_401k", "balances"=>{"stocks"=>79078821, "bonds"=>77586767}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>73791310, "type"=>"_401k", "balances"=>{"stocks"=>37247045, "bonds"=>36544265}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11137680, "qualified_withdrawal"=>11525292, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662972}}}, 
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>156452396, "type"=>"_401k", "balances"=>{"stocks"=>78971209, "bonds"=>77481187}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>73690896, "type"=>"_401k", "balances"=>{"stocks"=>37196357, "bonds"=>36494539}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11360436, "qualified_withdrawal"=>11755800, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116236}}}, 
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>156089414, "type"=>"_401k", "balances"=>{"stocks"=>78790025, "bonds"=>77299389}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>73519921, "type"=>"_401k", "balances"=>{"stocks"=>37111014, "bonds"=>36408907}}}, "cashflow"=>nil}
    ]
  end
end
