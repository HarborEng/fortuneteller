require 'test_helper'

class AcceptanceTest < Minitest::Test

  def test_expected_results
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      r = FortuneTeller::Benchmark.run.as_json
    end

    result.zip(expected_no_reallocation) do |actual, expected|
      assert_equal expected, actual
    end
  end

  def test_expected_cashflow
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      r = FortuneTeller::Benchmark.run.as_json
    end

    result, expected = [result, expected_no_reallocation].map do |transform|
      transform.map do |r| 
        {date: r["date"], cashflow: r["cashflow"]}
      end
    end

    result.zip(expected) do |a, e|
      assert_equal e, a
    end
  end

  def test_expected_results_guaranteed_income
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim_guaranteed_income
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result.zip(expected_guaranteed_income) do |actual, expected|
      assert_equal expected, actual
    end
  end

  def test_expected_results_percent_spending
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim_percent_spending
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result.zip(expected_percent_spending) do |actual, expected|
      assert_equal expected, actual
    end
  end  

  def test_expected_results_5050
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim
      sim.set_allocation_strategy(:annual, {stocks: [5000], bonds: [5000]})
      # sim.set_withdrawal_strategy(:tax_sequence)
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result.zip(expected_5050_reallocation) do |actual, expected|
      assert_equal expected, actual
    end
  end

  def test_expected_cashflow_5050
    result = Timecop.freeze(Date.parse('2017-12-14')) do
      sim = FortuneTeller::Benchmark.create_sim
      sim.set_allocation_strategy(:annual, {stocks: [5000], bonds: [5000]})
      context = FortuneTeller::Benchmark.default_context
      sim.simulate(**context).as_json
    end

    result, expected = [result, expected_5050_reallocation].map do |transform|
      transform.map do |r| 
        {date: r["date"], cashflow: r["cashflow"]}
      end
    end

    result.zip(expected) do |a, e|
      assert_equal e, a
    end
  end

  def test_state_independence
    # create two sims, run one first through a set of crazy params, and
    # then both through the same params. the results should match up.
    sim1 = FortuneTeller::Benchmark.create_sim
    sim2 = FortuneTeller::Benchmark.create_sim

    sim1.simulate(growth_rates:
      {
        stocks:       [1.15],
        bonds:        [1.45],
        wage_growth:  [1.30],
        inflation:    [1.12]
      }
    )

    res1 = sim1.simulate(
      growth_rates: {
        stocks:       [1.05],
        bonds:        [1.05],
        wage_growth:  [1.00],
        inflation:    [1.02]
      }
    ).as_json

    res2 = sim2.simulate(
      growth_rates: {
        stocks:       [1.05],
        bonds:        [1.05],
        wage_growth:  [1.00],
        inflation:    [1.02]
      }
    ).as_json

    res1.as_json.zip(res2).each do |line1, line2|
      assert_equal line1, line2
    end
  end

  def expected_percent_spending
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}},
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50125051, "type"=>"_401k", "balances"=>{"stocks"=>30086330, "bonds"=>20038721}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20057553, "type"=>"_401k", "balances"=>{"stocks"=>20057553}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53764116, "type"=>"_401k", "balances"=>{"stocks"=>32923847, "bonds"=>20840269}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>22035261, "type"=>"_401k", "balances"=>{"stocks"=>22035261}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57605493, "type"=>"_401k", "balances"=>{"stocks"=>35931615, "bonds"=>21673878}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>24131633, "type"=>"_401k", "balances"=>{"stocks"=>24131633}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61669213, "type"=>"_401k", "balances"=>{"stocks"=>39125958, "bonds"=>22543255}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>26357891, "type"=>"_401k", "balances"=>{"stocks"=>26357891}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65950837, "type"=>"_401k", "balances"=>{"stocks"=>42505851, "bonds"=>23444986}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>28713621, "type"=>"_401k", "balances"=>{"stocks"=>28713621}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>70471326, "type"=>"_401k", "balances"=>{"stocks"=>46088541, "bonds"=>24382785}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>31210694, "type"=>"_401k", "balances"=>{"stocks"=>31210694}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>75244286, "type"=>"_401k", "balances"=>{"stocks"=>49886191, "bonds"=>25358095}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>33857592, "type"=>"_401k", "balances"=>{"stocks"=>33857592}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>80295425, "type"=>"_401k", "balances"=>{"stocks"=>53920171, "bonds"=>26375254}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>36669054, "type"=>"_401k", "balances"=>{"stocks"=>36669054}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>85617984, "type"=>"_401k", "balances"=>{"stocks"=>58187720, "bonds"=>27430264}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>39643454, "type"=>"_401k", "balances"=>{"stocks"=>39643454}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>91238794, "type"=>"_401k", "balances"=>{"stocks"=>62711320, "bonds"=>28527474}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>42796318, "type"=>"_401k", "balances"=>{"stocks"=>42796318}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>97174911, "type"=>"_401k", "balances"=>{"stocks"=>67506337, "bonds"=>29668574}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>46138353, "type"=>"_401k", "balances"=>{"stocks"=>46138353}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>103459138, "type"=>"_401k", "balances"=>{"stocks"=>72600506, "bonds"=>30858632}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>49688739, "type"=>"_401k", "balances"=>{"stocks"=>49688739}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>110081852, "type"=>"_401k", "balances"=>{"stocks"=>77988874, "bonds"=>32092978}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>53444320, "type"=>"_401k", "balances"=>{"stocks"=>53444320}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>117077240, "type"=>"_401k", "balances"=>{"stocks"=>83700544, "bonds"=>33376696}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>57425236, "type"=>"_401k", "balances"=>{"stocks"=>57425236}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>5880220, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15811570}}},
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>119580301, "type"=>"_401k", "balances"=>{"stocks"=>86000298, "bonds"=>33580003}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>59644405, "type"=>"_401k", "balances"=>{"stocks"=>59644405}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>0, "ss_income"=>4851756, "qualified_withdrawal"=>7197384, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16931640}}},
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>121173644, "type"=>"_401k", "balances"=>{"stocks"=>87611669, "bonds"=>33561975}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>61519637, "type"=>"_401k", "balances"=>{"stocks"=>61519637}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>0, "ss_income"=>5748788, "qualified_withdrawal"=>7341336, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14717624}}},
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>122770482, "type"=>"_401k", "balances"=>{"stocks"=>89232549, "bonds"=>33537933}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>62911869, "type"=>"_401k", "balances"=>{"stocks"=>62911869}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6271764, "qualified_withdrawal"=>7488168, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13759932}}},
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>124373239, "type"=>"_401k", "balances"=>{"stocks"=>90865818, "bonds"=>33507421}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>64063376, "type"=>"_401k", "balances"=>{"stocks"=>64063376}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6397200, "qualified_withdrawal"=>7637928, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14035128}}},
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>125979779, "type"=>"_401k", "balances"=>{"stocks"=>92509787, "bonds"=>33469992}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>65222427, "type"=>"_401k", "balances"=>{"stocks"=>65222427}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6525144, "qualified_withdrawal"=>7790688, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14315832}}},
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>127607952, "type"=>"_401k", "balances"=>{"stocks"=>94178769, "bonds"=>33429183}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>66399113, "type"=>"_401k", "balances"=>{"stocks"=>66399113}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6655644, "qualified_withdrawal"=>7946496, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14602140}}},
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>129218752, "type"=>"_401k", "balances"=>{"stocks"=>95841314, "bonds"=>33377438}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>67571265, "type"=>"_401k", "balances"=>{"stocks"=>67571265}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6788760, "qualified_withdrawal"=>8105424, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14894184}}},
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>130828752, "type"=>"_401k", "balances"=>{"stocks"=>97510676, "bonds"=>33318076}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>68748219, "type"=>"_401k", "balances"=>{"stocks"=>68748219}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6924528, "qualified_withdrawal"=>8267532, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15192060}}},
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>132436147, "type"=>"_401k", "balances"=>{"stocks"=>99185309, "bonds"=>33250838}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>69928889, "type"=>"_401k", "balances"=>{"stocks"=>69928889}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7063032, "qualified_withdrawal"=>8432892, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15495924}}},
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>134059370, "type"=>"_401k", "balances"=>{"stocks"=>100880174, "bonds"=>33179196}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>71123823, "type"=>"_401k", "balances"=>{"stocks"=>71123823}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7204284, "qualified_withdrawal"=>8601552, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15805836}}},
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>135656739, "type"=>"_401k", "balances"=>{"stocks"=>102561135, "bonds"=>33095604}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>72308958, "type"=>"_401k", "balances"=>{"stocks"=>72308958}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7348368, "qualified_withdrawal"=>8773572, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16121940}}},
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>137245296, "type"=>"_401k", "balances"=>{"stocks"=>104241978, "bonds"=>33003318}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>73494003, "type"=>"_401k", "balances"=>{"stocks"=>73494003}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7495332, "qualified_withdrawal"=>8949048, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16444380}}},
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>138822603, "type"=>"_401k", "balances"=>{"stocks"=>105920570, "bonds"=>32902033}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>74677466, "type"=>"_401k", "balances"=>{"stocks"=>74677466}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7645236, "qualified_withdrawal"=>9128028, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16773264}}},
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>140407538, "type"=>"_401k", "balances"=>{"stocks"=>107612396, "bonds"=>32795142}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>75870257, "type"=>"_401k", "balances"=>{"stocks"=>75870257}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7798152, "qualified_withdrawal"=>9310596, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17108748}}},
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>141955599, "type"=>"_401k", "balances"=>{"stocks"=>109280473, "bonds"=>32675126}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>77046308, "type"=>"_401k", "balances"=>{"stocks"=>77046308}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7954116, "qualified_withdrawal"=>9496800, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17450916}}},
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>143484100, "type"=>"_401k", "balances"=>{"stocks"=>110938955, "bonds"=>32545145}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>78215591, "type"=>"_401k", "balances"=>{"stocks"=>78215591}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8113200, "qualified_withdrawal"=>9686736, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17799936}}},
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>144989829, "type"=>"_401k", "balances"=>{"stocks"=>112584976, "bonds"=>32404853}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>79376091, "type"=>"_401k", "balances"=>{"stocks"=>79376091}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8275464, "qualified_withdrawal"=>9880476, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18155940}}},
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>146491870, "type"=>"_401k", "balances"=>{"stocks"=>114234341, "bonds"=>32257529}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>80538947, "type"=>"_401k", "balances"=>{"stocks"=>80538947}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8440968, "qualified_withdrawal"=>10078080, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18519048}}},
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>147942789, "type"=>"_401k", "balances"=>{"stocks"=>115847080, "bonds"=>32095709}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>81675980, "type"=>"_401k", "balances"=>{"stocks"=>81675980}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8609784, "qualified_withdrawal"=>10279644, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18889428}}},
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>149359937, "type"=>"_401k", "balances"=>{"stocks"=>117437493, "bonds"=>31922444}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>82797271, "type"=>"_401k", "balances"=>{"stocks"=>82797271}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8781984, "qualified_withdrawal"=>10485240, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19267224}}},
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>150739085, "type"=>"_401k", "balances"=>{"stocks"=>119001768, "bonds"=>31737317}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>83900136, "type"=>"_401k", "balances"=>{"stocks"=>83900136}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8957616, "qualified_withdrawal"=>10694940, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19652556}}},
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>152099262, "type"=>"_401k", "balances"=>{"stocks"=>120555779, "bonds"=>31543483}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>84995766, "type"=>"_401k", "balances"=>{"stocks"=>84995766}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9136776, "qualified_withdrawal"=>10908840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20045616}}},
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>153389947, "type"=>"_401k", "balances"=>{"stocks"=>122056396, "bonds"=>31333551}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>86053746, "type"=>"_401k", "balances"=>{"stocks"=>86053746}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9319512, "qualified_withdrawal"=>11127012, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20446524}}},
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>154628222, "type"=>"_401k", "balances"=>{"stocks"=>123517788, "bonds"=>31110434}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>87084076, "type"=>"_401k", "balances"=>{"stocks"=>87084076}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9505896, "qualified_withdrawal"=>11349552, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20855448}}},
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>155808586, "type"=>"_401k", "balances"=>{"stocks"=>124934938, "bonds"=>30873648}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>88083212, "type"=>"_401k", "balances"=>{"stocks"=>88083212}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9696024, "qualified_withdrawal"=>11576544, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21272568}}},
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>156949575, "type"=>"_401k", "balances"=>{"stocks"=>126323408, "bonds"=>30626167}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>89062131, "type"=>"_401k", "balances"=>{"stocks"=>89062131}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9889944, "qualified_withdrawal"=>11808084, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21698028}}},
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>157997497, "type"=>"_401k", "balances"=>{"stocks"=>127636774, "bonds"=>30360723}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>89988096, "type"=>"_401k", "balances"=>{"stocks"=>89988096}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10087740, "qualified_withdrawal"=>12044244, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22131984}}},
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>158968735, "type"=>"_401k", "balances"=>{"stocks"=>128888685, "bonds"=>30080050}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>90870735, "type"=>"_401k", "balances"=>{"stocks"=>90870735}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10289496, "qualified_withdrawal"=>12285132, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22574628}}},
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>159856153, "type"=>"_401k", "balances"=>{"stocks"=>130072570, "bonds"=>29783583}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>91705408, "type"=>"_401k", "balances"=>{"stocks"=>91705408}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10495284, "qualified_withdrawal"=>12530832, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23026116}}},
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>160677294, "type"=>"_401k", "balances"=>{"stocks"=>131203201, "bonds"=>29474093}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>92502538, "type"=>"_401k", "balances"=>{"stocks"=>92502538}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10705188, "qualified_withdrawal"=>12781440, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23486628}}},
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>161375203, "type"=>"_401k", "balances"=>{"stocks"=>132230749, "bonds"=>29144454}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>93226995, "type"=>"_401k", "balances"=>{"stocks"=>93226995}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10919280, "qualified_withdrawal"=>13037076, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23956356}}},
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>161964996, "type"=>"_401k", "balances"=>{"stocks"=>133167801, "bonds"=>28797195}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>93887648, "type"=>"_401k", "balances"=>{"stocks"=>93887648}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11137680, "qualified_withdrawal"=>13297812, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>24435492}}},
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>162437464, "type"=>"_401k", "balances"=>{"stocks"=>134005814, "bonds"=>28431650}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>94478473, "type"=>"_401k", "balances"=>{"stocks"=>94478473}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11360436, "qualified_withdrawal"=>13563768, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>24924204}}},
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>162808442, "type"=>"_401k", "balances"=>{"stocks"=>134758105, "bonds"=>28050337}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>95008863, "type"=>"_401k", "balances"=>{"stocks"=>95008863}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11587644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11587644, "qualified_withdrawal"=>13835052, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>25422696}}},
      {"date"=>"2066-01-01", "accounts"=>{"AA"=>{"date"=>"2066-01-01", "total_balance"=>163017676, "type"=>"_401k", "balances"=>{"stocks"=>135371349, "bonds"=>27646327}}, "AD"=>{"date"=>"2066-01-01", "total_balance"=>95441219, "type"=>"_401k", "balances"=>{"stocks"=>95441219}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11819388}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11819388, "qualified_withdrawal"=>14111748, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>25931136}}},
      {"date"=>"2067-01-01", "accounts"=>{"AA"=>{"date"=>"2067-01-01", "total_balance"=>163078268, "type"=>"_401k", "balances"=>{"stocks"=>135856381, "bonds"=>27221887}}, "AD"=>{"date"=>"2067-01-01", "total_balance"=>95783189, "type"=>"_401k", "balances"=>{"stocks"=>95783189}}}, "cashflow"=>nil}
    ]
  end

  def expected_guaranteed_income
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}},
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50125051, "type"=>"_401k", "balances"=>{"stocks"=>30086330, "bonds"=>20038721}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20057553, "type"=>"_401k", "balances"=>{"stocks"=>20057553}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53764116, "type"=>"_401k", "balances"=>{"stocks"=>32923847, "bonds"=>20840269}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>22035261, "type"=>"_401k", "balances"=>{"stocks"=>22035261}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57605493, "type"=>"_401k", "balances"=>{"stocks"=>35931615, "bonds"=>21673878}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>24131633, "type"=>"_401k", "balances"=>{"stocks"=>24131633}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61669213, "type"=>"_401k", "balances"=>{"stocks"=>39125958, "bonds"=>22543255}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>26357891, "type"=>"_401k", "balances"=>{"stocks"=>26357891}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65950837, "type"=>"_401k", "balances"=>{"stocks"=>42505851, "bonds"=>23444986}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>28713621, "type"=>"_401k", "balances"=>{"stocks"=>28713621}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>70471326, "type"=>"_401k", "balances"=>{"stocks"=>46088541, "bonds"=>24382785}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>31210694, "type"=>"_401k", "balances"=>{"stocks"=>31210694}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>75244286, "type"=>"_401k", "balances"=>{"stocks"=>49886191, "bonds"=>25358095}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>33857592, "type"=>"_401k", "balances"=>{"stocks"=>33857592}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>80295425, "type"=>"_401k", "balances"=>{"stocks"=>53920171, "bonds"=>26375254}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>36669054, "type"=>"_401k", "balances"=>{"stocks"=>36669054}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>85617984, "type"=>"_401k", "balances"=>{"stocks"=>58187720, "bonds"=>27430264}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>39643454, "type"=>"_401k", "balances"=>{"stocks"=>39643454}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>91238794, "type"=>"_401k", "balances"=>{"stocks"=>62711320, "bonds"=>28527474}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>42796318, "type"=>"_401k", "balances"=>{"stocks"=>42796318}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>97174911, "type"=>"_401k", "balances"=>{"stocks"=>67506337, "bonds"=>29668574}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>46138353, "type"=>"_401k", "balances"=>{"stocks"=>46138353}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>103459138, "type"=>"_401k", "balances"=>{"stocks"=>72600506, "bonds"=>30858632}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>49688739, "type"=>"_401k", "balances"=>{"stocks"=>49688739}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>110081852, "type"=>"_401k", "balances"=>{"stocks"=>77988874, "bonds"=>32092978}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>53444320, "type"=>"_401k", "balances"=>{"stocks"=>53444320}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>117077240, "type"=>"_401k", "balances"=>{"stocks"=>83700544, "bonds"=>33376696}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>57425236, "type"=>"_401k", "balances"=>{"stocks"=>57425236}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}},
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>122247414, "type"=>"_401k", "balances"=>{"stocks"=>87918447, "bonds"=>34328967}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>60968369, "type"=>"_401k", "balances"=>{"stocks"=>60968369}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756, "gty_income"=>550000}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>385000, "ss_income"=>4851756, "qualified_withdrawal"=>2146988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}},
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>127443513, "type"=>"_401k", "balances"=>{"stocks"=>92144946, "bonds"=>35298567}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>64668841, "type"=>"_401k", "balances"=>{"stocks"=>64668841}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788, "gty_income"=>611000}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>427700, "ss_income"=>5748788, "qualified_withdrawal"=>4707584, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}},
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>131191232, "type"=>"_401k", "balances"=>{"stocks"=>95352952, "bonds"=>35838280}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>67177501, "type"=>"_401k", "balances"=>{"stocks"=>67177501}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764, "gty_income"=>623220}, "posttax"=>{"w2_income"=>0, "gty_income"=>436254, "ss_income"=>6271764, "qualified_withdrawal"=>6053778, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}},
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>134227719, "type"=>"_401k", "balances"=>{"stocks"=>98065397, "bonds"=>36162322}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>69088458, "type"=>"_401k", "balances"=>{"stocks"=>69088458}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200, "gty_income"=>635680}, "posttax"=>{"w2_income"=>0, "gty_income"=>444976, "ss_income"=>6397200, "qualified_withdrawal"=>6174860, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}},
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>137364702, "type"=>"_401k", "balances"=>{"stocks"=>100869990, "bonds"=>36494712}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>71064331, "type"=>"_401k", "balances"=>{"stocks"=>71064331}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144, "gty_income"=>648402}, "posttax"=>{"w2_income"=>0, "gty_income"=>453881, "ss_income"=>6525144, "qualified_withdrawal"=>6298355, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277380}}},
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>140627661, "type"=>"_401k", "balances"=>{"stocks"=>103787733, "bonds"=>36839928}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>73119922, "type"=>"_401k", "balances"=>{"stocks"=>73119922}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644, "gty_income"=>661366}, "posttax"=>{"w2_income"=>0, "gty_income"=>462956, "ss_income"=>6655644, "qualified_withdrawal"=>6424322, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542922}}},
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>143980316, "type"=>"_401k", "balances"=>{"stocks"=>106789940, "bonds"=>37190376}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>75235021, "type"=>"_401k", "balances"=>{"stocks"=>75235021}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760, "gty_income"=>674592}, "posttax"=>{"w2_income"=>0, "gty_income"=>472214, "ss_income"=>6788760, "qualified_withdrawal"=>6552809, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813783}}},
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>147447476, "type"=>"_401k", "balances"=>{"stocks"=>109897122, "bonds"=>37550354}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>77424079, "type"=>"_401k", "balances"=>{"stocks"=>77424079}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528, "gty_income"=>688082}, "posttax"=>{"w2_income"=>0, "gty_income"=>481657, "ss_income"=>6924528, "qualified_withdrawal"=>6683876, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090061}}},
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>151034271, "type"=>"_401k", "balances"=>{"stocks"=>113113991, "bonds"=>37920280}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>79690412, "type"=>"_401k", "balances"=>{"stocks"=>79690412}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032, "gty_income"=>701847}, "posttax"=>{"w2_income"=>0, "gty_income"=>491293, "ss_income"=>7063032, "qualified_withdrawal"=>6817536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371861}}},
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>154769415, "type"=>"_401k", "balances"=>{"stocks"=>116464560, "bonds"=>38304855}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>82050937, "type"=>"_401k", "balances"=>{"stocks"=>82050937}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284, "gty_income"=>715888}, "posttax"=>{"w2_income"=>0, "gty_income"=>501122, "ss_income"=>7204284, "qualified_withdrawal"=>6953885, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659291}}},
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>158613356, "type"=>"_401k", "balances"=>{"stocks"=>119917120, "bonds"=>38696236}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>84483316, "type"=>"_401k", "balances"=>{"stocks"=>84483316}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368, "gty_income"=>730205}, "posttax"=>{"w2_income"=>0, "gty_income"=>511143, "ss_income"=>7348368, "qualified_withdrawal"=>7092969, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}},
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>162594101, "type"=>"_401k", "balances"=>{"stocks"=>123495165, "bonds"=>39098936}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>87004099, "type"=>"_401k", "balances"=>{"stocks"=>87004099}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332, "gty_income"=>744809}, "posttax"=>{"w2_income"=>0, "gty_income"=>521366, "ss_income"=>7495332, "qualified_withdrawal"=>7234837, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251535}}},
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>166717970, "type"=>"_401k", "balances"=>{"stocks"=>127204514, "bonds"=>39513456}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>89617392, "type"=>"_401k", "balances"=>{"stocks"=>89617392}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236, "gty_income"=>759701}, "posttax"=>{"w2_income"=>0, "gty_income"=>531791, "ss_income"=>7645236, "qualified_withdrawal"=>7379538, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556565}}},
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>171017442, "type"=>"_401k", "balances"=>{"stocks"=>131072706, "bonds"=>39944736}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>92342592, "type"=>"_401k", "balances"=>{"stocks"=>92342592}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152, "gty_income"=>774892}, "posttax"=>{"w2_income"=>0, "gty_income"=>542424, "ss_income"=>7798152, "qualified_withdrawal"=>7527120, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}},
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>175449349, "type"=>"_401k", "balances"=>{"stocks"=>135064675, "bonds"=>40384674}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>95154992, "type"=>"_401k", "balances"=>{"stocks"=>95154992}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116, "gty_income"=>790394}, "posttax"=>{"w2_income"=>0, "gty_income"=>553276, "ss_income"=>7954116, "qualified_withdrawal"=>7677654, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185046}}},
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>180045498, "type"=>"_401k", "balances"=>{"stocks"=>139207466, "bonds"=>40838032}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>98073647, "type"=>"_401k", "balances"=>{"stocks"=>98073647}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200, "gty_income"=>806197}, "posttax"=>{"w2_income"=>0, "gty_income"=>564338, "ss_income"=>8113200, "qualified_withdrawal"=>7831211, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508749}}},
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>184813662, "type"=>"_401k", "balances"=>{"stocks"=>143508274, "bonds"=>41305388}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>101103627, "type"=>"_401k", "balances"=>{"stocks"=>101103627}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464, "gty_income"=>822322}, "posttax"=>{"w2_income"=>0, "gty_income"=>575625, "ss_income"=>8275464, "qualified_withdrawal"=>7987842, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838931}}},
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>189790821, "type"=>"_401k", "balances"=>{"stocks"=>147998845, "bonds"=>41791976}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>104267298, "type"=>"_401k", "balances"=>{"stocks"=>104267298}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968, "gty_income"=>838771}, "posttax"=>{"w2_income"=>0, "gty_income"=>587140, "ss_income"=>8440968, "qualified_withdrawal"=>8147605, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175713}}},
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>194929701, "type"=>"_401k", "balances"=>{"stocks"=>152640319, "bonds"=>42289382}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>107537284, "type"=>"_401k", "balances"=>{"stocks"=>107537284}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784, "gty_income"=>855544}, "posttax"=>{"w2_income"=>0, "gty_income"=>598881, "ss_income"=>8609784, "qualified_withdrawal"=>8310560, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519225}}},
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>200266628, "type"=>"_401k", "balances"=>{"stocks"=>157463971, "bonds"=>42802657}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>110935618, "type"=>"_401k", "balances"=>{"stocks"=>110935618}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984, "gty_income"=>872663}, "posttax"=>{"w2_income"=>0, "gty_income"=>610864, "ss_income"=>8781984, "qualified_withdrawal"=>8476745, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869593}}},
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>205811238, "type"=>"_401k", "balances"=>{"stocks"=>162478753, "bonds"=>43332485}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>114468605, "type"=>"_401k", "balances"=>{"stocks"=>114468605}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616, "gty_income"=>890108}, "posttax"=>{"w2_income"=>0, "gty_income"=>623076, "ss_income"=>8957616, "qualified_withdrawal"=>8646299, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226991}}},
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>211605844, "type"=>"_401k", "balances"=>{"stocks"=>167721422, "bonds"=>43884422}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>118162138, "type"=>"_401k", "balances"=>{"stocks"=>118162138}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776, "gty_income"=>907910}, "posttax"=>{"w2_income"=>0, "gty_income"=>635537, "ss_income"=>9136776, "qualified_withdrawal"=>8819216, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591529}}},
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>217598574, "type"=>"_401k", "balances"=>{"stocks"=>173148862, "bonds"=>44449712}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>121985846, "type"=>"_401k", "balances"=>{"stocks"=>121985846}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512, "gty_income"=>926072}, "posttax"=>{"w2_income"=>0, "gty_income"=>648250, "ss_income"=>9319512, "qualified_withdrawal"=>8995601, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963363}}},
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>223831159, "type"=>"_401k", "balances"=>{"stocks"=>178797417, "bonds"=>45033742}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>125965332, "type"=>"_401k", "balances"=>{"stocks"=>125965332}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896, "gty_income"=>944594}, "posttax"=>{"w2_income"=>0, "gty_income"=>661216, "ss_income"=>9505896, "qualified_withdrawal"=>9175515, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342627}}},
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>230315488, "type"=>"_401k", "balances"=>{"stocks"=>184678195, "bonds"=>45637293}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>130108424, "type"=>"_401k", "balances"=>{"stocks"=>130108424}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024, "gty_income"=>963487}, "posttax"=>{"w2_income"=>0, "gty_income"=>674441, "ss_income"=>9696024, "qualified_withdrawal"=>9359027, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729492}}},
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>237100329, "type"=>"_401k", "balances"=>{"stocks"=>190834020, "bonds"=>46266309}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>134445288, "type"=>"_401k", "balances"=>{"stocks"=>134445288}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944, "gty_income"=>982752}, "posttax"=>{"w2_income"=>0, "gty_income"=>687926, "ss_income"=>9889944, "qualified_withdrawal"=>9546202, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}},
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>244128591, "type"=>"_401k", "balances"=>{"stocks"=>197216937, "bonds"=>46911654}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>138942145, "type"=>"_401k", "balances"=>{"stocks"=>138942145}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740, "gty_income"=>1002411}, "posttax"=>{"w2_income"=>0, "gty_income"=>701688, "ss_income"=>10087740, "qualified_withdrawal"=>9737121, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526549}}},
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>251448497, "type"=>"_401k", "balances"=>{"stocks"=>203869412, "bonds"=>47579085}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>143628905, "type"=>"_401k", "balances"=>{"stocks"=>143628905}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496, "gty_income"=>1022455}, "posttax"=>{"w2_income"=>0, "gty_income"=>715719, "ss_income"=>10289496, "qualified_withdrawal"=>9931867, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937082}}},
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>259074794, "type"=>"_401k", "balances"=>{"stocks"=>210805275, "bonds"=>48269519}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>148515320, "type"=>"_401k", "balances"=>{"stocks"=>148515320}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284, "gty_income"=>1042905}, "posttax"=>{"w2_income"=>0, "gty_income"=>730034, "ss_income"=>10495284, "qualified_withdrawal"=>10130503, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355821}}},
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>267063983, "type"=>"_401k", "balances"=>{"stocks"=>218074653, "bonds"=>48989330}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>153636700, "type"=>"_401k", "balances"=>{"stocks"=>153636700}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188, "gty_income"=>1063763}, "posttax"=>{"w2_income"=>0, "gty_income"=>744634, "ss_income"=>10705188, "qualified_withdrawal"=>10333122, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782944}}},
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>275353038, "type"=>"_401k", "balances"=>{"stocks"=>225624094, "bonds"=>49728944}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>158955389, "type"=>"_401k", "balances"=>{"stocks"=>158955389}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280, "gty_income"=>1085040}, "posttax"=>{"w2_income"=>0, "gty_income"=>759528, "ss_income"=>10919280, "qualified_withdrawal"=>10539788, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218596}}},
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>283998017, "type"=>"_401k", "balances"=>{"stocks"=>233503463, "bonds"=>50494554}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>164506516, "type"=>"_401k", "balances"=>{"stocks"=>164506516}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680, "gty_income"=>1106737}, "posttax"=>{"w2_income"=>0, "gty_income"=>774716, "ss_income"=>11137680, "qualified_withdrawal"=>10750579, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662975}}},
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>293017269, "type"=>"_401k", "balances"=>{"stocks"=>241730033, "bonds"=>51287236}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>170302250, "type"=>"_401k", "balances"=>{"stocks"=>170302250}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436, "gty_income"=>1128876}, "posttax"=>{"w2_income"=>0, "gty_income"=>790213, "ss_income"=>11360436, "qualified_withdrawal"=>10965586, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116235}}},
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>302476645, "type"=>"_401k", "balances"=>{"stocks"=>250362781, "bonds"=>52113864}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>176384146, "type"=>"_401k", "balances"=>{"stocks"=>176384146}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11587644, "gty_income"=>1151459}, "posttax"=>{"w2_income"=>0, "gty_income"=>806021, "ss_income"=>11587644, "qualified_withdrawal"=>11184899, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23578564}}},
      {"date"=>"2066-01-01", "accounts"=>{"AA"=>{"date"=>"2066-01-01", "total_balance"=>312306353, "type"=>"_401k", "balances"=>{"stocks"=>259341984, "bonds"=>52964369}}, "AD"=>{"date"=>"2066-01-01", "total_balance"=>182710121, "type"=>"_401k", "balances"=>{"stocks"=>182710121}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11819388, "gty_income"=>1174486}, "posttax"=>{"w2_income"=>0, "gty_income"=>822140, "ss_income"=>11819388, "qualified_withdrawal"=>11408606, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>24050134}}},
      {"date"=>"2067-01-01", "accounts"=>{"AA"=>{"date"=>"2067-01-01", "total_balance"=>322571935, "type"=>"_401k", "balances"=>{"stocks"=>268726493, "bonds"=>53845442}}, "AD"=>{"date"=>"2067-01-01", "total_balance"=>189321645, "type"=>"_401k", "balances"=>{"stocks"=>189321645}}}, "cashflow"=>nil}
    ]
  end

  def expected_no_reallocation
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}},
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50125051, "type"=>"_401k", "balances"=>{"stocks"=>30086330, "bonds"=>20038721}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20057553, "type"=>"_401k", "balances"=>{"stocks"=>20057553}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53764116, "type"=>"_401k", "balances"=>{"stocks"=>32923847, "bonds"=>20840269}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>22035261, "type"=>"_401k", "balances"=>{"stocks"=>22035261}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57605493, "type"=>"_401k", "balances"=>{"stocks"=>35931615, "bonds"=>21673878}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>24131633, "type"=>"_401k", "balances"=>{"stocks"=>24131633}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61669213, "type"=>"_401k", "balances"=>{"stocks"=>39125958, "bonds"=>22543255}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>26357891, "type"=>"_401k", "balances"=>{"stocks"=>26357891}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65950837, "type"=>"_401k", "balances"=>{"stocks"=>42505851, "bonds"=>23444986}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>28713621, "type"=>"_401k", "balances"=>{"stocks"=>28713621}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>70471326, "type"=>"_401k", "balances"=>{"stocks"=>46088541, "bonds"=>24382785}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>31210694, "type"=>"_401k", "balances"=>{"stocks"=>31210694}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>75244286, "type"=>"_401k", "balances"=>{"stocks"=>49886191, "bonds"=>25358095}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>33857592, "type"=>"_401k", "balances"=>{"stocks"=>33857592}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>80295425, "type"=>"_401k", "balances"=>{"stocks"=>53920171, "bonds"=>26375254}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>36669054, "type"=>"_401k", "balances"=>{"stocks"=>36669054}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>85617984, "type"=>"_401k", "balances"=>{"stocks"=>58187720, "bonds"=>27430264}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>39643454, "type"=>"_401k", "balances"=>{"stocks"=>39643454}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>91238794, "type"=>"_401k", "balances"=>{"stocks"=>62711320, "bonds"=>28527474}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>42796318, "type"=>"_401k", "balances"=>{"stocks"=>42796318}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>97174911, "type"=>"_401k", "balances"=>{"stocks"=>67506337, "bonds"=>29668574}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>46138353, "type"=>"_401k", "balances"=>{"stocks"=>46138353}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>103459138, "type"=>"_401k", "balances"=>{"stocks"=>72600506, "bonds"=>30858632}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>49688739, "type"=>"_401k", "balances"=>{"stocks"=>49688739}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>110081852, "type"=>"_401k", "balances"=>{"stocks"=>77988874, "bonds"=>32092978}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>53444320, "type"=>"_401k", "balances"=>{"stocks"=>53444320}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>117077240, "type"=>"_401k", "balances"=>{"stocks"=>83700544, "bonds"=>33376696}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>57425236, "type"=>"_401k", "balances"=>{"stocks"=>57425236}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}},
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>122247414, "type"=>"_401k", "balances"=>{"stocks"=>87918447, "bonds"=>34328967}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>60968369, "type"=>"_401k", "balances"=>{"stocks"=>60968369}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>0, "ss_income"=>4851756, "qualified_withdrawal"=>2531988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}},
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>127180522, "type"=>"_401k", "balances"=>{"stocks"=>91954798, "bonds"=>35225724}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>64536050, "type"=>"_401k", "balances"=>{"stocks"=>64536050}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>0, "ss_income"=>5748788, "qualified_withdrawal"=>5135284, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}},
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>130622454, "type"=>"_401k", "balances"=>{"stocks"=>94939551, "bonds"=>35682903}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>66887535, "type"=>"_401k", "balances"=>{"stocks"=>66887535}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6271764, "qualified_withdrawal"=>6490032, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}},
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>133331191, "type"=>"_401k", "balances"=>{"stocks"=>97410405, "bonds"=>35920786}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>68628320, "type"=>"_401k", "balances"=>{"stocks"=>68628320}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6397200, "qualified_withdrawal"=>6619836, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}},
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>136117067, "type"=>"_401k", "balances"=>{"stocks"=>99953824, "bonds"=>36163243}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>70420228, "type"=>"_401k", "balances"=>{"stocks"=>70420228}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6525144, "qualified_withdrawal"=>6752232, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277376}}},
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>139003930, "type"=>"_401k", "balances"=>{"stocks"=>102589366, "bonds"=>36414564}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>72277040, "type"=>"_401k", "balances"=>{"stocks"=>72277040}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6655644, "qualified_withdrawal"=>6887280, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542924}}},
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>141954372, "type"=>"_401k", "balances"=>{"stocks"=>105287299, "bonds"=>36667073}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>74177807, "type"=>"_401k", "balances"=>{"stocks"=>74177807}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6788760, "qualified_withdrawal"=>7025028, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813788}}},
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>144991403, "type"=>"_401k", "balances"=>{"stocks"=>108066533, "bonds"=>36924870}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>76135853, "type"=>"_401k", "balances"=>{"stocks"=>76135853}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6924528, "qualified_withdrawal"=>7165536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090064}}},
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>148118459, "type"=>"_401k", "balances"=>{"stocks"=>110930251, "bonds"=>37188208}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>78153422, "type"=>"_401k", "balances"=>{"stocks"=>78153422}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7063032, "qualified_withdrawal"=>7308828, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371860}}},
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>151361987, "type"=>"_401k", "balances"=>{"stocks"=>113900456, "bonds"=>37461531}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>80246013, "type"=>"_401k", "balances"=>{"stocks"=>80246013}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7204284, "qualified_withdrawal"=>7455012, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659296}}},
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>154681416, "type"=>"_401k", "balances"=>{"stocks"=>116944435, "bonds"=>37736981}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>82390581, "type"=>"_401k", "balances"=>{"stocks"=>82390581}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7348368, "qualified_withdrawal"=>7604112, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}},
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>158102308, "type"=>"_401k", "balances"=>{"stocks"=>120083505, "bonds"=>38018803}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>84602142, "type"=>"_401k", "balances"=>{"stocks"=>84602142}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7495332, "qualified_withdrawal"=>7756200, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251532}}},
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>161628830, "type"=>"_401k", "balances"=>{"stocks"=>123321536, "bonds"=>38307294}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>86883425, "type"=>"_401k", "balances"=>{"stocks"=>86883425}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7645236, "qualified_withdrawal"=>7911324, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556560}}},
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>165290403, "type"=>"_401k", "balances"=>{"stocks"=>126683332, "bonds"=>38607071}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>89251906, "type"=>"_401k", "balances"=>{"stocks"=>89251906}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7798152, "qualified_withdrawal"=>8069544, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}},
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>169042998, "type"=>"_401k", "balances"=>{"stocks"=>130132925, "bonds"=>38910073}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>91682237, "type"=>"_401k", "balances"=>{"stocks"=>91682237}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7954116, "qualified_withdrawal"=>8230932, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185048}}},
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>172915124, "type"=>"_401k", "balances"=>{"stocks"=>133694402, "bonds"=>39220722}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>94191395, "type"=>"_401k", "balances"=>{"stocks"=>94191395}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8113200, "qualified_withdrawal"=>8395548, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508748}}},
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>176911856, "type"=>"_401k", "balances"=>{"stocks"=>137372498, "bonds"=>39539358}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>96782713, "type"=>"_401k", "balances"=>{"stocks"=>96782713}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8275464, "qualified_withdrawal"=>8563464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838928}}},
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>181066078, "type"=>"_401k", "balances"=>{"stocks"=>141195290, "bonds"=>39870788}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>99475974, "type"=>"_401k", "balances"=>{"stocks"=>99475974}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8440968, "qualified_withdrawal"=>8734740, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175708}}},
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>185329901, "type"=>"_401k", "balances"=>{"stocks"=>145123164, "bonds"=>40206737}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>102243268, "type"=>"_401k", "balances"=>{"stocks"=>102243268}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8609784, "qualified_withdrawal"=>8909436, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519220}}},
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>189735271, "type"=>"_401k", "balances"=>{"stocks"=>149183462, "bonds"=>40551809}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>105103861, "type"=>"_401k", "balances"=>{"stocks"=>105103861}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8781984, "qualified_withdrawal"=>9087612, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869596}}},
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>194288415, "type"=>"_401k", "balances"=>{"stocks"=>153381998, "bonds"=>40906417}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>108061843, "type"=>"_401k", "balances"=>{"stocks"=>108061843}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8957616, "qualified_withdrawal"=>9269376, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226992}}},
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>199026237, "type"=>"_401k", "balances"=>{"stocks"=>157750669, "bonds"=>41275568}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>111139690, "type"=>"_401k", "balances"=>{"stocks"=>111139690}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9136776, "qualified_withdrawal"=>9454752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591528}}},
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>203896597, "type"=>"_401k", "balances"=>{"stocks"=>162245839, "bonds"=>41650758}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>114306662, "type"=>"_401k", "balances"=>{"stocks"=>114306662}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9319512, "qualified_withdrawal"=>9643848, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963360}}},
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>208935458, "type"=>"_401k", "balances"=>{"stocks"=>166898657, "bonds"=>42036801}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>117584700, "type"=>"_401k", "balances"=>{"stocks"=>117584700}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9505896, "qualified_withdrawal"=>9836736, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342632}}},
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>214150436, "type"=>"_401k", "balances"=>{"stocks"=>171716265, "bonds"=>42434171}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>120978835, "type"=>"_401k", "balances"=>{"stocks"=>120978835}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9696024, "qualified_withdrawal"=>10033464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729488}}},
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>219583211, "type"=>"_401k", "balances"=>{"stocks"=>176735081, "bonds"=>42848130}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>124514728, "type"=>"_401k", "balances"=>{"stocks"=>124514728}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9889944, "qualified_withdrawal"=>10234128, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}},
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>225176867, "type"=>"_401k", "balances"=>{"stocks"=>181906964, "bonds"=>43269903}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>128158463, "type"=>"_401k", "balances"=>{"stocks"=>128158463}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10087740, "qualified_withdrawal"=>10438812, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526552}}},
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>230972115, "type"=>"_401k", "balances"=>{"stocks"=>187267566, "bonds"=>43704549}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>131935153, "type"=>"_401k", "balances"=>{"stocks"=>131935153}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10289496, "qualified_withdrawal"=>10647588, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937084}}},
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>236978328, "type"=>"_401k", "balances"=>{"stocks"=>192825707, "bonds"=>44152621}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>135851016, "type"=>"_401k", "balances"=>{"stocks"=>135851016}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10495284, "qualified_withdrawal"=>10860540, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355824}}},
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>243242786, "type"=>"_401k", "balances"=>{"stocks"=>198623131, "bonds"=>44619655}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>139935461, "type"=>"_401k", "balances"=>{"stocks"=>139935461}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10705188, "qualified_withdrawal"=>11077752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782940}}},
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>249703255, "type"=>"_401k", "balances"=>{"stocks"=>204606672, "bonds"=>45096583}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>144151030, "type"=>"_401k", "balances"=>{"stocks"=>144151030}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10919280, "qualified_withdrawal"=>11299320, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218600}}},
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>256406053, "type"=>"_401k", "balances"=>{"stocks"=>210817311, "bonds"=>45588742}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>148526599, "type"=>"_401k", "balances"=>{"stocks"=>148526599}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11137680, "qualified_withdrawal"=>11525292, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662972}}},
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>263362764, "type"=>"_401k", "balances"=>{"stocks"=>217265989, "bonds"=>46096775}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>153069874, "type"=>"_401k", "balances"=>{"stocks"=>153069874}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11360436, "qualified_withdrawal"=>11755800, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116236}}},
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>270627320, "type"=>"_401k", "balances"=>{"stocks"=>224000784, "bonds"=>46626536}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>157814724, "type"=>"_401k", "balances"=>{"stocks"=>157814724}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11587644},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11587644, "qualified_withdrawal"=>11990916, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23578560}}},
      {"date"=>"2066-01-01", "accounts"=>{"AA"=>{"date"=>"2066-01-01", "total_balance"=>278131519, "type"=>"_401k", "balances"=>{"stocks"=>230962887, "bonds"=>47168632}}, "AD"=>{"date"=>"2066-01-01", "total_balance"=>162719716, "type"=>"_401k", "balances"=>{"stocks"=>162719716}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11819388},
      "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11819388, "qualified_withdrawal"=>12230748, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>24050136}}},
      {"date"=>"2067-01-01", "accounts"=>{"AA"=>{"date"=>"2067-01-01", "total_balance"=>285928365, "type"=>"_401k", "balances"=>{"stocks"=>238199655, "bonds"=>47728710}}, "AD"=>{"date"=>"2067-01-01", "total_balance"=>167818219, "type"=>"_401k", "balances"=>{"stocks"=>167818219}}}, "cashflow"=>nil}
    ]
  end

  def expected_5050_reallocation
    [
      {"date"=>"2017-12-14", "accounts"=>{"AA"=>{"date"=>"2017-12-14", "total_balance"=>50000000, "type"=>"_401k", "balances"=>{"stocks"=>30000000, "bonds"=>20000000}}, "AD"=>{"date"=>"2017-12-14", "total_balance"=>20000000, "type"=>"_401k", "balances"=>{"stocks"=>20000000}}}, "cashflow"=>{"pretax"=>{}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>0}}},
      {"date"=>"2018-01-01", "accounts"=>{"AA"=>{"date"=>"2018-01-01", "total_balance"=>50120343, "type"=>"_401k", "balances"=>{"stocks"=>25071942, "bonds"=>25048401}}, "AD"=>{"date"=>"2018-01-01", "total_balance"=>20048137, "type"=>"_401k", "balances"=>{"stocks"=>10028777, "bonds"=>10019360}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2019-01-01", "accounts"=>{"AA"=>{"date"=>"2019-01-01", "total_balance"=>53658697, "type"=>"_401k", "balances"=>{"stocks"=>27596119, "bonds"=>26062578}}, "AD"=>{"date"=>"2019-01-01", "total_balance"=>21824801, "type"=>"_401k", "balances"=>{"stocks"=>11399770, "bonds"=>10425031}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2020-01-01", "accounts"=>{"AA"=>{"date"=>"2020-01-01", "total_balance"=>57373970, "type"=>"_401k", "balances"=>{"stocks"=>29471446, "bonds"=>27902524}}, "AD"=>{"date"=>"2020-01-01", "total_balance"=>23690299, "type"=>"_401k", "balances"=>{"stocks"=>12341401, "bonds"=>11348898}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2021-01-01", "accounts"=>{"AA"=>{"date"=>"2021-01-01", "total_balance"=>61283093, "type"=>"_401k", "balances"=>{"stocks"=>31445423, "bonds"=>29837670}}, "AD"=>{"date"=>"2021-01-01", "total_balance"=>25652420, "type"=>"_401k", "balances"=>{"stocks"=>13332140, "bonds"=>12320280}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2022-01-01", "accounts"=>{"AA"=>{"date"=>"2022-01-01", "total_balance"=>65379584, "type"=>"_401k", "balances"=>{"stocks"=>33512378, "bonds"=>31867206}}, "AD"=>{"date"=>"2022-01-01", "total_balance"=>27709296, "type"=>"_401k", "balances"=>{"stocks"=>14370039, "bonds"=>13339257}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2023-01-01", "accounts"=>{"AA"=>{"date"=>"2023-01-01", "total_balance"=>69680900, "type"=>"_401k", "balances"=>{"stocks"=>35683517, "bonds"=>33997383}}, "AD"=>{"date"=>"2023-01-01", "total_balance"=>29869018, "type"=>"_401k", "balances"=>{"stocks"=>15460182, "bonds"=>14408836}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2024-01-01", "accounts"=>{"AA"=>{"date"=>"2024-01-01", "total_balance"=>74197283, "type"=>"_401k", "balances"=>{"stocks"=>37963214, "bonds"=>36234069}}, "AD"=>{"date"=>"2024-01-01", "total_balance"=>32136725, "type"=>"_401k", "balances"=>{"stocks"=>16604835, "bonds"=>15531890}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2025-01-01", "accounts"=>{"AA"=>{"date"=>"2025-01-01", "total_balance"=>78949937, "type"=>"_401k", "balances"=>{"stocks"=>40363205, "bonds"=>38586732}}, "AD"=>{"date"=>"2025-01-01", "total_balance"=>34522354, "type"=>"_401k", "balances"=>{"stocks"=>17809462, "bonds"=>16712892}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2026-01-01", "accounts"=>{"AA"=>{"date"=>"2026-01-01", "total_balance"=>83929771, "type"=>"_401k", "balances"=>{"stocks"=>42875803, "bonds"=>41053968}}, "AD"=>{"date"=>"2026-01-01", "total_balance"=>37022729, "type"=>"_401k", "balances"=>{"stocks"=>19071104, "bonds"=>17951625}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2027-01-01", "accounts"=>{"AA"=>{"date"=>"2027-01-01", "total_balance"=>89158599, "type"=>"_401k", "balances"=>{"stocks"=>45515117, "bonds"=>43643482}}, "AD"=>{"date"=>"2027-01-01", "total_balance"=>39648124, "type"=>"_401k", "balances"=>{"stocks"=>20396303, "bonds"=>19251821}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2028-01-01", "accounts"=>{"AA"=>{"date"=>"2028-01-01", "total_balance"=>94648869, "type"=>"_401k", "balances"=>{"stocks"=>48286396, "bonds"=>46362473}}, "AD"=>{"date"=>"2028-01-01", "total_balance"=>42404788, "type"=>"_401k", "balances"=>{"stocks"=>21787762, "bonds"=>20617026}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2029-01-01", "accounts"=>{"AA"=>{"date"=>"2029-01-01", "total_balance"=>100426977, "type"=>"_401k", "balances"=>{"stocks"=>51204275, "bonds"=>49222702}}, "AD"=>{"date"=>"2029-01-01", "total_balance"=>45305261, "type"=>"_401k", "balances"=>{"stocks"=>23252403, "bonds"=>22052858}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2030-01-01", "accounts"=>{"AA"=>{"date"=>"2030-01-01", "total_balance"=>106480662, "type"=>"_401k", "balances"=>{"stocks"=>54258634, "bonds"=>52222028}}, "AD"=>{"date"=>"2030-01-01", "total_balance"=>48344780, "type"=>"_401k", "balances"=>{"stocks"=>24786045, "bonds"=>23558735}}}, "cashflow"=>{"pretax"=>{"w2_income"=>16275000}, "posttax"=>{"w2_income"=>11392500, "gty_income"=>0, "ss_income"=>0, "qualified_withdrawal"=>0, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11392500}}},
      {"date"=>"2031-01-01", "accounts"=>{"AA"=>{"date"=>"2031-01-01", "total_balance"=>112837032, "type"=>"_401k", "balances"=>{"stocks"=>57467087, "bonds"=>55369945}}, "AD"=>{"date"=>"2031-01-01", "total_balance"=>51536274, "type"=>"_401k", "balances"=>{"stocks"=>26396989, "bonds"=>25139285}}}, "cashflow"=>{"pretax"=>{"w2_income"=>8525000, "ss_income"=>3963850}, "posttax"=>{"w2_income"=>5967500, "gty_income"=>0, "ss_income"=>3963850, "qualified_withdrawal"=>1988840, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>11920190}}},
      {"date"=>"2032-01-01", "accounts"=>{"AA"=>{"date"=>"2032-01-01", "total_balance"=>117261924, "type"=>"_401k", "balances"=>{"stocks"=>59275605, "bonds"=>57986319}}, "AD"=>{"date"=>"2032-01-01", "total_balance"=>54246257, "type"=>"_401k", "balances"=>{"stocks"=>27762054, "bonds"=>26484203}}}, "cashflow"=>{"pretax"=>{"w2_income"=>6975000, "ss_income"=>4851756}, "posttax"=>{"w2_income"=>4882500, "gty_income"=>0, "ss_income"=>4851756, "qualified_withdrawal"=>2531988, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12266244}}},
      {"date"=>"2033-01-01", "accounts"=>{"AA"=>{"date"=>"2033-01-01", "total_balance"=>121367708, "type"=>"_401k", "balances"=>{"stocks"=>61263378, "bonds"=>60104330}}, "AD"=>{"date"=>"2033-01-01", "total_balance"=>56913828, "type"=>"_401k", "balances"=>{"stocks"=>29109109, "bonds"=>27804719}}}, "cashflow"=>{"pretax"=>{"w2_income"=>2325000, "ss_income"=>5748788}, "posttax"=>{"w2_income"=>1627500, "gty_income"=>0, "ss_income"=>5748788, "qualified_withdrawal"=>5135284, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12511572}}},
      {"date"=>"2034-01-01", "accounts"=>{"AA"=>{"date"=>"2034-01-01", "total_balance"=>123864442, "type"=>"_401k", "balances"=>{"stocks"=>62522051, "bonds"=>61342391}}, "AD"=>{"date"=>"2034-01-01", "total_balance"=>58340852, "type"=>"_401k", "balances"=>{"stocks"=>29575125, "bonds"=>28765727}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6271764}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6271764, "qualified_withdrawal"=>6490032, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>12761796}}},
      {"date"=>"2035-01-01", "accounts"=>{"AA"=>{"date"=>"2035-01-01", "total_balance"=>125526584, "type"=>"_401k", "balances"=>{"stocks"=>63361037, "bonds"=>62165547}}, "AD"=>{"date"=>"2035-01-01", "total_balance"=>59123726, "type"=>"_401k", "balances"=>{"stocks"=>29843404, "bonds"=>29280322}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6397200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6397200, "qualified_withdrawal"=>6619836, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13017036}}},
      {"date"=>"2036-01-01", "accounts"=>{"AA"=>{"date"=>"2036-01-01", "total_balance"=>127181203, "type"=>"_401k", "balances"=>{"stocks"=>64196226, "bonds"=>62984977}}, "AD"=>{"date"=>"2036-01-01", "total_balance"=>59903069, "type"=>"_401k", "balances"=>{"stocks"=>30236790, "bonds"=>29666279}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6525144}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6525144, "qualified_withdrawal"=>6752232, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13277376}}},
      {"date"=>"2037-01-01", "accounts"=>{"AA"=>{"date"=>"2037-01-01", "total_balance"=>128843882, "type"=>"_401k", "balances"=>{"stocks"=>65037165, "bonds"=>63806717}}, "AD"=>{"date"=>"2037-01-01", "total_balance"=>60686205, "type"=>"_401k", "balances"=>{"stocks"=>30632876, "bonds"=>30053329}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6655644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6655644, "qualified_withdrawal"=>6887280, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13542924}}},
      {"date"=>"2038-01-01", "accounts"=>{"AA"=>{"date"=>"2038-01-01", "total_balance"=>130477657, "type"=>"_401k", "balances"=>{"stocks"=>65860151, "bonds"=>64617506}}, "AD"=>{"date"=>"2038-01-01", "total_balance"=>61455713, "type"=>"_401k", "balances"=>{"stocks"=>31020502, "bonds"=>30435211}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6788760}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6788760, "qualified_withdrawal"=>7025028, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>13813788}}},
      {"date"=>"2039-01-01", "accounts"=>{"AA"=>{"date"=>"2039-01-01", "total_balance"=>132096943, "type"=>"_401k", "balances"=>{"stocks"=>66677505, "bonds"=>65419438}}, "AD"=>{"date"=>"2039-01-01", "total_balance"=>62218408, "type"=>"_401k", "balances"=>{"stocks"=>31405482, "bonds"=>30812926}}}, "cashflow"=>{"pretax"=>{"ss_income"=>6924528}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>6924528, "qualified_withdrawal"=>7165536, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14090064}}},
      {"date"=>"2040-01-01", "accounts"=>{"AA"=>{"date"=>"2040-01-01", "total_balance"=>133699094, "type"=>"_401k", "balances"=>{"stocks"=>67486208, "bonds"=>66212886}}, "AD"=>{"date"=>"2040-01-01", "total_balance"=>62973033, "type"=>"_401k", "balances"=>{"stocks"=>31786389, "bonds"=>31186644}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7063032}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7063032, "qualified_withdrawal"=>7308828, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14371860}}},
      {"date"=>"2041-01-01", "accounts"=>{"AA"=>{"date"=>"2041-01-01", "total_balance"=>135299987, "type"=>"_401k", "balances"=>{"stocks"=>68296042, "bonds"=>67003945}}, "AD"=>{"date"=>"2041-01-01", "total_balance"=>63727057, "type"=>"_401k", "balances"=>{"stocks"=>32167822, "bonds"=>31559235}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7204284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7204284, "qualified_withdrawal"=>7455012, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14659296}}},
      {"date"=>"2042-01-01", "accounts"=>{"AA"=>{"date"=>"2042-01-01", "total_balance"=>136860190, "type"=>"_401k", "balances"=>{"stocks"=>69081810, "bonds"=>67778380}}, "AD"=>{"date"=>"2042-01-01", "total_balance"=>64461925, "type"=>"_401k", "balances"=>{"stocks"=>32537924, "bonds"=>31924001}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7348368}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7348368, "qualified_withdrawal"=>7604112, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>14952480}}},
      {"date"=>"2043-01-01", "accounts"=>{"AA"=>{"date"=>"2043-01-01", "total_balance"=>138394316, "type"=>"_401k", "balances"=>{"stocks"=>69856178, "bonds"=>68538138}}, "AD"=>{"date"=>"2043-01-01", "total_balance"=>65184500, "type"=>"_401k", "balances"=>{"stocks"=>32902651, "bonds"=>32281849}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7495332}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7495332, "qualified_withdrawal"=>7756200, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15251532}}},
      {"date"=>"2044-01-01", "accounts"=>{"AA"=>{"date"=>"2044-01-01", "total_balance"=>139898962, "type"=>"_401k", "balances"=>{"stocks"=>70615669, "bonds"=>69283293}}, "AD"=>{"date"=>"2044-01-01", "total_balance"=>65893194, "type"=>"_401k", "balances"=>{"stocks"=>33260373, "bonds"=>32632821}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7645236}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7645236, "qualified_withdrawal"=>7911324, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15556560}}},
      {"date"=>"2045-01-01", "accounts"=>{"AA"=>{"date"=>"2045-01-01", "total_balance"=>141390070, "type"=>"_401k", "balances"=>{"stocks"=>71370165, "bonds"=>70019905}}, "AD"=>{"date"=>"2045-01-01", "total_balance"=>66595513, "type"=>"_401k", "balances"=>{"stocks"=>33615745, "bonds"=>32979768}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7798152}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7798152, "qualified_withdrawal"=>8069544, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>15867696}}},
      {"date"=>"2046-01-01", "accounts"=>{"AA"=>{"date"=>"2046-01-01", "total_balance"=>142825740, "type"=>"_401k", "balances"=>{"stocks"=>72092992, "bonds"=>70732748}}, "AD"=>{"date"=>"2046-01-01", "total_balance"=>67271718, "type"=>"_401k", "balances"=>{"stocks"=>33956200, "bonds"=>33315518}}}, "cashflow"=>{"pretax"=>{"ss_income"=>7954116}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>7954116, "qualified_withdrawal"=>8230932, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16185048}}},
      {"date"=>"2047-01-01", "accounts"=>{"AA"=>{"date"=>"2047-01-01", "total_balance"=>144220518, "type"=>"_401k", "balances"=>{"stocks"=>72797024, "bonds"=>71423494}}, "AD"=>{"date"=>"2047-01-01", "total_balance"=>67928665, "type"=>"_401k", "balances"=>{"stocks"=>34287803, "bonds"=>33640862}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8113200}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8113200, "qualified_withdrawal"=>8395548, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16508748}}},
      {"date"=>"2048-01-01", "accounts"=>{"AA"=>{"date"=>"2048-01-01", "total_balance"=>145570102, "type"=>"_401k", "balances"=>{"stocks"=>73478242, "bonds"=>72091860}}, "AD"=>{"date"=>"2048-01-01", "total_balance"=>68564333, "type"=>"_401k", "balances"=>{"stocks"=>34608664, "bonds"=>33955669}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8275464}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8275464, "qualified_withdrawal"=>8563464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>16838928}}},
      {"date"=>"2049-01-01", "accounts"=>{"AA"=>{"date"=>"2049-01-01", "total_balance"=>146890255, "type"=>"_401k", "balances"=>{"stocks"=>74146522, "bonds"=>72743733}}, "AD"=>{"date"=>"2049-01-01", "total_balance"=>69186130, "type"=>"_401k", "balances"=>{"stocks"=>34923425, "bonds"=>34262705}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8440968}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8440968, "qualified_withdrawal"=>8734740, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17175708}}},
      {"date"=>"2050-01-01", "accounts"=>{"AA"=>{"date"=>"2050-01-01", "total_balance"=>148136525, "type"=>"_401k", "balances"=>{"stocks"=>74773673, "bonds"=>73362852}}, "AD"=>{"date"=>"2050-01-01", "total_balance"=>69773125, "type"=>"_401k", "balances"=>{"stocks"=>35218817, "bonds"=>34554308}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8609784}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8609784, "qualified_withdrawal"=>8909436, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17519220}}},
      {"date"=>"2051-01-01", "accounts"=>{"AA"=>{"date"=>"2051-01-01", "total_balance"=>149323134, "type"=>"_401k", "balances"=>{"stocks"=>75372628, "bonds"=>73950506}}, "AD"=>{"date"=>"2051-01-01", "total_balance"=>70332027, "type"=>"_401k", "balances"=>{"stocks"=>35500927, "bonds"=>34831100}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8781984}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8781984, "qualified_withdrawal"=>9087612, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>17869596}}},
      {"date"=>"2052-01-01", "accounts"=>{"AA"=>{"date"=>"2052-01-01", "total_balance"=>150444675, "type"=>"_401k", "balances"=>{"stocks"=>75938741, "bonds"=>74505934}}, "AD"=>{"date"=>"2052-01-01", "total_balance"=>70860290, "type"=>"_401k", "balances"=>{"stocks"=>35767571, "bonds"=>35092719}}}, "cashflow"=>{"pretax"=>{"ss_income"=>8957616}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>8957616, "qualified_withdrawal"=>9269376, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18226992}}},
      {"date"=>"2053-01-01", "accounts"=>{"AA"=>{"date"=>"2053-01-01", "total_balance"=>151516381, "type"=>"_401k", "balances"=>{"stocks"=>76481674, "bonds"=>75034707}}, "AD"=>{"date"=>"2053-01-01", "total_balance"=>71365080, "type"=>"_401k", "balances"=>{"stocks"=>36023307, "bonds"=>35341773}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9136776}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9136776, "qualified_withdrawal"=>9454752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18591528}}},
      {"date"=>"2054-01-01", "accounts"=>{"AA"=>{"date"=>"2054-01-01", "total_balance"=>152491270, "type"=>"_401k", "balances"=>{"stocks"=>76971785, "bonds"=>75519485}}, "AD"=>{"date"=>"2054-01-01", "total_balance"=>71824254, "type"=>"_401k", "balances"=>{"stocks"=>36254147, "bonds"=>35570107}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9319512}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9319512, "qualified_withdrawal"=>9643848, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>18963360}}},
      {"date"=>"2055-01-01", "accounts"=>{"AA"=>{"date"=>"2055-01-01", "total_balance"=>153382878, "type"=>"_401k", "balances"=>{"stocks"=>77421834, "bonds"=>75961044}}, "AD"=>{"date"=>"2055-01-01", "total_balance"=>72244212, "type"=>"_401k", "balances"=>{"stocks"=>36466124, "bonds"=>35778088}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9505896}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9505896, "qualified_withdrawal"=>9836736, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19342632}}},
      {"date"=>"2056-01-01", "accounts"=>{"AA"=>{"date"=>"2056-01-01", "total_balance"=>154184403, "type"=>"_401k", "balances"=>{"stocks"=>77826413, "bonds"=>76357990}}, "AD"=>{"date"=>"2056-01-01", "total_balance"=>72621737, "type"=>"_401k", "balances"=>{"stocks"=>36656688, "bonds"=>35965049}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9696024}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9696024, "qualified_withdrawal"=>10033464, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>19729488}}},
      {"date"=>"2057-01-01", "accounts"=>{"AA"=>{"date"=>"2057-01-01", "total_balance"=>154910157, "type"=>"_401k", "balances"=>{"stocks"=>78194765, "bonds"=>76715392}}, "AD"=>{"date"=>"2057-01-01", "total_balance"=>72963578, "type"=>"_401k", "balances"=>{"stocks"=>36830187, "bonds"=>36133391}}}, "cashflow"=>{"pretax"=>{"ss_income"=>9889944}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>9889944, "qualified_withdrawal"=>10234128, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20124072}}},
      {"date"=>"2058-01-01", "accounts"=>{"AA"=>{"date"=>"2058-01-01", "total_balance"=>155510608, "type"=>"_401k", "balances"=>{"stocks"=>78495830, "bonds"=>77014778}}, "AD"=>{"date"=>"2058-01-01", "total_balance"=>73246388, "type"=>"_401k", "balances"=>{"stocks"=>36971988, "bonds"=>36274400}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10087740}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10087740, "qualified_withdrawal"=>10438812, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20526552}}},
      {"date"=>"2059-01-01", "accounts"=>{"AA"=>{"date"=>"2059-01-01", "total_balance"=>155998171, "type"=>"_401k", "balances"=>{"stocks"=>78741934, "bonds"=>77256237}}, "AD"=>{"date"=>"2059-01-01", "total_balance"=>73476038, "type"=>"_401k", "balances"=>{"stocks"=>37087905, "bonds"=>36388133}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10289496}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10289496, "qualified_withdrawal"=>10647588, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>20937084}}},
      {"date"=>"2060-01-01", "accounts"=>{"AA"=>{"date"=>"2060-01-01", "total_balance"=>156364360, "type"=>"_401k", "balances"=>{"stocks"=>78926775, "bonds"=>77437585}}, "AD"=>{"date"=>"2060-01-01", "total_balance"=>73648511, "type"=>"_401k", "balances"=>{"stocks"=>37174965, "bonds"=>36473546}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10495284}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10495284, "qualified_withdrawal"=>10860540, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21355824}}},
      {"date"=>"2061-01-01", "accounts"=>{"AA"=>{"date"=>"2061-01-01", "total_balance"=>156621973, "type"=>"_401k", "balances"=>{"stocks"=>79058849, "bonds"=>77563124}}, "AD"=>{"date"=>"2061-01-01", "total_balance"=>73769852, "type"=>"_401k", "balances"=>{"stocks"=>37237173, "bonds"=>36532679}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10705188}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10705188, "qualified_withdrawal"=>11077752, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>21782940}}},
      {"date"=>"2062-01-01", "accounts"=>{"AA"=>{"date"=>"2062-01-01", "total_balance"=>156719026, "type"=>"_401k", "balances"=>{"stocks"=>79105796, "bonds"=>77613230}}, "AD"=>{"date"=>"2062-01-01", "total_balance"=>73815562, "type"=>"_401k", "balances"=>{"stocks"=>37259284, "bonds"=>36556278}}}, "cashflow"=>{"pretax"=>{"ss_income"=>10919280}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>10919280, "qualified_withdrawal"=>11299320, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22218600}}},
      {"date"=>"2063-01-01", "accounts"=>{"AA"=>{"date"=>"2063-01-01", "total_balance"=>156666241, "type"=>"_401k", "balances"=>{"stocks"=>79079151, "bonds"=>77587090}}, "AD"=>{"date"=>"2063-01-01", "total_balance"=>73790700, "type"=>"_401k", "balances"=>{"stocks"=>37246737, "bonds"=>36543963}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11137680}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11137680, "qualified_withdrawal"=>11525292, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>22662972}}},
      {"date"=>"2064-01-01", "accounts"=>{"AA"=>{"date"=>"2064-01-01", "total_balance"=>156453049, "type"=>"_401k", "balances"=>{"stocks"=>78971540, "bonds"=>77481509}}, "AD"=>{"date"=>"2064-01-01", "total_balance"=>73690290, "type"=>"_401k", "balances"=>{"stocks"=>37196052, "bonds"=>36494238}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11360436}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11360436, "qualified_withdrawal"=>11755800, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23116236}}},
      {"date"=>"2065-01-01", "accounts"=>{"AA"=>{"date"=>"2065-01-01", "total_balance"=>156090064, "type"=>"_401k", "balances"=>{"stocks"=>78790354, "bonds"=>77299710}}, "AD"=>{"date"=>"2065-01-01", "total_balance"=>73519323, "type"=>"_401k", "balances"=>{"stocks"=>37110714, "bonds"=>36408609}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11587644}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11587644, "qualified_withdrawal"=>11990916, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>23578560}}},
      {"date"=>"2066-01-01", "accounts"=>{"AA"=>{"date"=>"2066-01-01", "total_balance"=>155522994, "type"=>"_401k", "balances"=>{"stocks"=>78502081, "bonds"=>77020913}}, "AD"=>{"date"=>"2066-01-01", "total_balance"=>73252223, "type"=>"_401k", "balances"=>{"stocks"=>36974933, "bonds"=>36277290}}}, "cashflow"=>{"pretax"=>{"ss_income"=>11819388}, "posttax"=>{"w2_income"=>0, "gty_income"=>0, "ss_income"=>11819388, "qualified_withdrawal"=>12230748, "roth_withdrawal"=>0, "regular_withdrawal"=>0, "total"=>24050136}}},
      {"date"=>"2067-01-01", "accounts"=>{"AA"=>{"date"=>"2067-01-01", "total_balance"=>154760120, "type"=>"_401k", "balances"=>{"stocks"=>78117013, "bonds"=>76643107}}, "AD"=>{"date"=>"2067-01-01", "total_balance"=>72892906, "type"=>"_401k", "balances"=>{"stocks"=>36793562, "bonds"=>36099344}}}, "cashflow"=>nil}
    ]
  end

  def print(results)
    puts "["
    puts results.map(&:inspect).join(",\n")
    puts "]"
  end
end
